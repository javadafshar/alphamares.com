(self.webpackChunkalphamares_client=self.webpackChunkalphamares_client||[]).push([[261],{85983:(e,t,l)=>{"use strict";l.d(t,{A:()=>c});var s=l(65043),n=l(86213),i=l(86178),a=l.n(i),r=l(70579);function c(e){const[t,l]=(0,s.useState)({title:e.auction.title,titleEN:e.auction.titleEN,start:a()(e.auction.start).format("YYYY-MM-DDTHH:mm"),end:a()(e.auction.end).format("YYYY-MM-DDTHH:mm"),commission:e.auction.commission,description:e.auction.description,descriptionEN:e.auction.descriptionEN,subtitle:e.auction.subtitle||""}),[i,c]=(0,s.useState)(),o=e=>{const{name:s,value:n}=e.target;if("start"===s||"end"===s){const e=a()(n).format("YYYY-MM-DDTHH:mm");l({...t,[s]:e})}else l({...t,[s]:n})};return(0,r.jsx)("div",{style:{margin:"5% 1%",padding:"5%"},children:(0,r.jsxs)("form",{onSubmit:async l=>{l.preventDefault();try{const l=new FormData;l.append("title",t.title),l.append("titleEN",t.titleEN),l.append("description",t.description),l.append("descriptionEN",t.descriptionEN),i&&l.append("picture",i),"auction"===e.auction.saleType?(l.append("start",t.start),l.append("end",t.end),l.append("commission",t.commission),l.append("saleType","auction")):"private_sale"===e.auction.saleType&&(l.append("subtitle",t.subtitle),l.append("saleType","private_sale")),await n.A.put("".concat("https://alphamares.com/","api/auction/").concat(e.auction._id),l,{headers:{"Content-Type":"multipart/form-data"}}),e.onClose()}catch(s){console.error("Error updating auction:",s),alert("LIMIT_FILE_SIZE"===s.response.data?"Error: File size exceeds limit (8MB max)":s.response.data)}},children:[(0,r.jsxs)("label",{children:["Titre :",(0,r.jsx)("input",{type:"text",name:"title",value:t.title,onChange:o,minLength:3,maxLength:30,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Titre en anglais :",(0,r.jsx)("input",{type:"text",name:"titleEN",value:t.titleEN,onChange:o,minLength:3,maxLength:30,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{}),"auction"===e.auction.saleType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{children:["D\xe9but :",(0,r.jsx)("input",{type:"datetime-local",name:"start",value:t.start,onChange:o,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Fin :",(0,r.jsx)("input",{type:"datetime-local",name:"end",value:t.end,onChange:o,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Commission acheteur (en %):",(0,r.jsx)("input",{type:"number",name:"commission",step:.1,value:t.commission,onChange:o,required:!0,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{})]}),"private_sale"===e.auction.saleType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{children:["Sous-titre :",(0,r.jsx)("input",{type:"text",name:"subtitle",value:t.subtitle,onChange:o,minLength:3,maxLength:50,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{})]}),(0,r.jsxs)("label",{children:["Description:",(0,r.jsx)("textarea",{name:"description",value:t.description,onChange:o,minLength:3,maxLength:300,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Description en anglais :",(0,r.jsx)("textarea",{name:"descriptionEN",value:t.descriptionEN,onChange:o,minLength:3,maxLength:300,style:{border:"1px solid"},required:!0})]}),(0,r.jsx)("br",{}),(0,r.jsx)("label",{htmlFor:"file",children:"Charger une image"}),(0,r.jsx)("input",{type:"file",id:"file",name:"file",accept:".jpg, .jpeg, .png",onChange:e=>c(e.target.files[0])}),(0,r.jsx)("br",{}),(0,r.jsx)("button",{type:"submit",children:"\xc9diter la vente"})]})})}},1105:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Te});var s=l(65043),n=l(73216),i=l(79456),a=l(54669),r=l(24056),c=l(65077),o=l(70579);const d=()=>(0,o.jsxs)("div",{children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Administration des ventes"})}),(0,o.jsx)("br",{}),(0,o.jsx)(c.A,{}),(0,o.jsx)("br",{})]});var x=l(86213),h=l(71806),u=l(73460),p=l(10039),j=l(84882),m=l(28076),g=l(63336),b=l(630),f=l(19778),y=l(85502),A=l(63471),v=l(87899),C=l(96446),E=l(85865),S=l(17392),Y=l(11906),w=l(86178),N=l.n(w),L=l(54536),I=l(65037),F=l(30279),k=l(4219),T=l(83462),B=l(35475);function R(e){const{open:t,onClose:l,user:n}=e,[i,a]=(0,s.useState)();return(0,s.useEffect)((()=>{x.A.get("".concat("https://alphamares.com/","api/user/followedLotsInfos/").concat(n._id)).then((e=>{"No followed lot"!==e.data&&a(e.data)})).catch((e=>console.log(e)))}),[]),(0,o.jsxs)(T.A,{onClose:l,open:t,fullWidth:!0,children:[(0,o.jsx)(k.A,{children:"Lots suivis"}),(0,o.jsx)(s.Suspense,{children:void 0===i?(0,o.jsx)("div",{style:{textAlign:"center",margin:"10px",fontSize:"1.5rem"},children:(0,o.jsx)("h4",{children:"Aucun lot en favori"})}):(0,o.jsxs)(h.A,{sx:{width:"80%",margin:"auto",marginBlock:"2%"},children:[(0,o.jsx)(j.A,{children:(0,o.jsxs)(m.A,{children:[(0,o.jsx)(p.A,{style:{fontWeight:"700"},children:"Titre de la Vente"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"N\xb0 du Lot"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"Nom de Lot"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"Date et heure de la vente"})]})}),(0,o.jsx)(u.A,{children:i.sort((function(e,t){return N()(t.auction.start)-N()(e.auction.start)})).map((e=>(0,o.jsxs)(m.A,{children:[(0,o.jsx)(p.A,{children:e.auction.title}),(0,o.jsx)(p.A,{align:"right",children:(0,o.jsx)(B.k2,{to:"/lot/".concat(e._id),style:{color:"black",textDecoration:"underline"},children:e.lot.number})}),(0,o.jsx)(p.A,{align:"right",children:e.lot.title}),(0,o.jsx)(p.A,{align:"right",children:N()(e.auction.start).format("LLL")})]},e.lot._id)))})]})})]})}var H=l(20349),_=l(35071);function D(e){const{open:t,onClose:l,user:n}=e,[i,a]=(0,s.useState)();return(0,s.useEffect)((()=>{var e;e=n._id,x.A.get("".concat("https://alphamares.com/","api/user/bids/").concat(e)).then((e=>{"No bid"!==e.data&&JSON.stringify(e.data)!==JSON.stringify(i)&&a(e.data)})).catch((e=>console.log(e)))}),[]),(0,o.jsxs)(T.A,{onClose:l,open:t,fullWidth:!0,children:[(0,o.jsx)(k.A,{children:"Ench\xe8res"}),(0,_.Im)(i)?(0,o.jsx)("div",{style:{textAlign:"center",margin:"10px",fontSize:"1.5rem"},children:(0,o.jsx)("h4",{children:"Aucune ench\xe8re"})}):(0,o.jsxs)(h.A,{sx:{width:"80%",margin:"auto",marginBlock:"2%"},children:[(0,o.jsx)(j.A,{children:(0,o.jsxs)(m.A,{children:[(0,o.jsx)(p.A,{style:{fontWeight:"700"},children:"Titre de la Vente"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"N\xb0 du Lot - Nom de Lot"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"Montant"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"Date et heure"}),(0,o.jsx)(p.A,{style:{fontWeight:"700"},align:"right",children:"Gagnant"})]})}),(0,o.jsx)(u.A,{children:i.sort((function(e,t){return N()(t.createdAt)-N()(e.createdAt)})).map((e=>(0,o.jsxs)(m.A,{children:[(0,o.jsx)(p.A,{children:e.auctionInfos}),(0,o.jsx)(p.A,{align:"right",children:(0,o.jsx)(B.k2,{to:"/lot/".concat(e.lotId),style:{color:"black",textDecoration:"underline"},children:e.lotInfos})}),(0,o.jsxs)(p.A,{align:"right",children:[e.amount," \u20ac"]}),(0,o.jsx)(p.A,{align:"right",children:N()(e.createdAt).format("LLL")}),(0,o.jsx)(p.A,{align:"right",children:void 0!==e.win?(0,o.jsx)(H.A,{}):"-"})]},e._id)))})]})]})}var z=l(94329),P=l(95540),q=l(64600),M=l(88988);function V(e){const{open:t,onClose:l,user:n}=e,a=(0,i.wA)(),[r,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)({name:n.name,surname:n.surname,email:n.email,password:"",job:n.job,phoneNumber:n.phoneNumber,adress:n.adress,adressCity:n.adressCity,adressCountry:n.adressCountry,gender:n.gender,language:n.language,birthDate:n.birthDate,type:n.type,tvaNumber:n.tvaNumber}),u=e=>{h({...d,[e.target.name]:e.target.value})};return(0,o.jsxs)(T.A,{onClose:l,open:t,fullWidth:!0,children:[(0,o.jsx)(k.A,{children:"Informations utilisateur"}),(0,o.jsx)("form",{style:{display:"flex",justifyContent:"center",margin:"5%"},noValidate:!0,autoComplete:"off",onSubmit:()=>{x.A.put("".concat("https://alphamares.com/","api/user/").concat(n._id),d).then((e=>{a("GET_USERS")})).catch((e=>console.log(e))),c(!1),l()},children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(q.A,{id:"name",name:"name",label:"Nom",type:"text",value:d.name,onChange:u,minLength:1,maxLength:30,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(q.A,{id:"surname",name:"surname",label:"Pr\xe9nom",value:d.surname,onChange:u,minLength:1,maxLength:30,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(q.A,{id:"email",name:"email",label:"Email",type:"email",value:d.email,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(q.A,{id:"password",name:"password",label:"Mot de passe",type:"password",value:d.password,onChange:u,minLength:6,maxLength:1024,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(q.A,{id:"phoneNumber",name:"phoneNumber",label:"Phone Number",value:d.phoneNumber,onChange:u,maxLength:30,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(q.A,{id:"adress",name:"adress",label:"Adress",value:d.adress,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(q.A,{id:"adressCountry",name:"adressCountry",label:"Country",value:d.adressCountry,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(q.A,{id:"language",name:"language",label:"Langue",value:d.language,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(q.A,{onChange:u,label:"Civilit\xe9",name:"gender",id:"outlined-select-gender",defaultValue:d.gender,sx:{width:"30vw",margin:"1% 5%"},disabled:!r,select:!0,children:[{label:"Male"},{label:"Female"}].map((e=>(0,o.jsx)(M.A,{value:e.label,children:e.label},e.label)))}),(0,o.jsx)("br",{}),(0,o.jsx)(q.A,{id:"birthDate",name:"birthDate",type:"date",label:"Date de naissance",value:d.birthDate.split("T")[0],onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(q.A,{onChange:u,name:"type",label:"Type",id:"type",defaultValue:d.type,sx:{width:"25vw",margin:"1% 5%"},disabled:!r,select:!0,children:[{label:"Private"},{label:"Company"}].map((e=>(0,o.jsx)(M.A,{value:e.label,children:e.label},e.label)))}),(0,o.jsx)("br",{}),"Company"===d.type&&(0,o.jsx)(q.A,{id:"tvaNumber",name:"tvaNumber",label:"N\xb0 TVA",value:d.tvaNumber,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"5%"},children:[(0,o.jsx)(Y.A,{variant:"contained",onClick:()=>c(!r),endIcon:(0,o.jsx)(P.A,{}),children:"Modifier"}),(0,o.jsx)("br",{}),(0,o.jsx)(Y.A,{type:"submit",variant:"contained",endIcon:(0,o.jsx)(z.A,{}),children:"Enregistrer"})]})]})})]})}var O=l(85386),W=l(15059),U=l(72826);const J=(0,l(55749).io)("".concat("https://alphamares.com/")),G=e=>{const{user:t,lot:l,fetchLot:n}=e,{uid:i}=(0,s.useContext)(W.u),[a,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0),[h,u]=(0,s.useState)(0),[p,j]=(0,s.useState)(!1),[m,g]=(0,O.Bd)(),[b,f]=(0,s.useState)();(0,s.useEffect)((()=>{l&&(function(){let e=0;if((0,_.Im)(l.lastBid))e=l.price<1e3?100:l.price>=1e3&&l.price<2e4?500:l.price>=2e4&&l.price<5e4?1e3:2e3;else{var t;const s=(null===(t=l.lastBid)||void 0===t?void 0:t.amount)||0;e=s<1e3?100:s>=1e3&&s<2e4?500:s>=2e4&&s<5e4?1e3:2e3}d(e),u(e)}(),function(e,t){(0,_.Im)(e.bids)?j(!1):e.bids.forEach((e=>{e.bidderId===t&&j(!0)}))}(l,i))}),[l,i]),(0,s.useEffect)((()=>{if(l){const e=setInterval((()=>{f((0,U.n)(l.start,l.end))}),1e3);return()=>clearInterval(e)}}),[l]);function y(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return(0,s.useEffect)((()=>{l&&f((0,U.n)(l.start,l.end))}),[l]),l?(0,o.jsxs)("div",{className:"bidPanel",children:[l.price?(0,o.jsxs)("div",{className:"bidPanel-container",children:[(0,o.jsxs)("div",{className:"blob",children:[(0,o.jsx)("h1",{children:m("Lot.Panel.Current-Auction")}),(0,_.Im)(l.lastBid)?(0,o.jsxs)("h1",{className:"moove",children:[y(l.price)," \u20ac"]}):(0,o.jsxs)("h1",{className:"moove",children:[y(l.lastBid.amount)," \u20ac"]})]}),(0,o.jsxs)("h2",{children:[m("Lot.Panel.Ends-In")," ",(0,o.jsx)("br",{})," ",(0,o.jsx)("strong",{children:(0,o.jsx)(U.u,{start:l.start,end:l.end})})]}),(0,o.jsxs)("div",{className:"bid-controls",children:[(0,o.jsx)("button",{onClick:function(){h>c&&u(h-c)},children:"-"}),(0,o.jsxs)("span",{children:[y(h)," \u20ac"]}),(0,o.jsx)("button",{onClick:function(){u(c+h)},children:"+"}),(0,o.jsx)("button",{onClick:async()=>{try{J.emit("bid",l._id),console.log("Bid event emitted")}catch(e){console.error("Socket emit error:",e)}if(a&&h>=c){r(!1);const s={bidderId:t._id,auctionId:l.auction,lotId:l._id,amount:(0,_.Im)(l.lastBid)?l.price+h:l.lastBid.amount+h};try{await x.A.post("".concat("https://alphamares.com/","api/bid"),s),n()}catch(e){console.log(e)}}},disabled:!a||h<c||p,style:{backgroundColor:"#007bff",color:"#fff",padding:"10px 20px",borderRadius:"5px",fontSize:"16px",cursor:"pointer",marginTop:"10px"},children:m("Lot.Panel.Bid")}),(0,o.jsxs)("label",{style:{fontSize:"16px",marginTop:"10px"},children:[(0,o.jsx)("input",{type:"checkbox",checked:a,onChange:function(e){r(e.target.checked)}}),m("Lot.Panel.I-Accept")," ",(0,o.jsx)("a",{href:"".concat("https://alphamares.com/","legals/CGU.pdf"),target:"_blank",rel:"noopener noreferrer",children:m("Lot.Panel.CGU")}),"."]})]})]}):(0,o.jsxs)("div",{className:"terms-container",children:[(0,o.jsx)("p",{style:{color:"#686e7c",fontSize:"1.5rem",marginBottom:"10px",textAlign:"center"},children:m("Lot.Panel.AskForPrice")}),(0,o.jsx)("p",{style:{fontSize:"1.5rem",fontWeight:"bold",textAlign:"center"},children:"+33 6 33 34 66 54"})]}),(0,o.jsx)("p",{style:{fontSize:"1.5rem",fontWeight:"bold",textAlign:"center"},children:m("Lot.Panel.CallOrWhatsapp")})]}):null};function K(e){const{open:t,onClose:l,user:n}=e,[i,a]=(0,s.useState)(),[r,c]=(0,s.useState)();let d,h;function u(){x.A.get("".concat("https://alphamares.com/","api/auction/currentAuctionLots")).then((e=>{e.data&&JSON.stringify(h)!==JSON.stringify(e.data.lots)&&(c(e.data.lots),h=e.data.lots),e.data&&JSON.stringify(d)!==JSON.stringify(e.data.currentAuction)&&(a(e.data.currentAuction),d=e.data.currentAuction)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{u();const e=setInterval((()=>u()),5e3);return()=>clearInterval(e)}),[]),(0,o.jsxs)(T.A,{onClose:l,open:t,children:[(0,o.jsx)(k.A,{children:"Ench\xe8re en cours"}),(0,_.Im)(i)?(0,o.jsx)("div",{style:{textAlign:"center",margin:"10px",fontSize:"1.5rem"},children:(0,o.jsx)("h4",{children:"Aucune ench\xe8re en cours"})}):(0,o.jsx)("div",{children:!(0,_.Im)(r)&&r.map((e=>(0,o.jsx)(Q,{lot:e,user:n,fetch:u},e._id)))})]})}function Q(e){const{lot:t,user:l,fetch:n}=e,[i,a]=(0,s.useState)(!1),[r]=(0,O.Bd)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(m.A,{sx:{"& > *":{borderBottom:"unset"},width:"100%"},children:[(0,o.jsx)(p.A,{children:(0,o.jsx)(S.A,{"aria-label":"expand row",size:"small",onClick:()=>a(!i),children:i?(0,o.jsx)(I.A,{}):(0,o.jsx)(L.A,{})})}),(0,o.jsxs)(p.A,{component:"th",scope:"row",children:[(0,o.jsxs)("strong",{children:[t.number," - ",t.title]})," ","(",r("Lot."+t.type),")"]}),(0,o.jsxs)(p.A,{align:"right",children:[t.bids.length," ench\xe9rissements"]}),(0,o.jsxs)(p.A,{align:"right",children:["Fin de l'ennch\xe8re : ",N()(t.end).format("lll")]}),(0,o.jsxs)(p.A,{align:"right",children:[(0,_.Im)(t.lastBid)?t.price:t.lastBid.amount," \u20ac"]})]}),(0,o.jsx)(F.A,{in:i,timeout:"auto",unmountOnExit:!0,className:"BidPanel-Cell",children:(0,o.jsx)(G,{lot:t,user:l,fetchLot:n})})]})}function Z(e){const t=e.user,[l,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[r,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[u,j]=(0,s.useState)(!1),[g,w]=(0,s.useState)(!1),[k,T]=(0,s.useState)(!1),[B,H]=(0,s.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(m.A,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,o.jsx)(p.A,{children:(0,o.jsx)(S.A,{"aria-label":"expand row",size:"small",onClick:()=>n(!l),children:l?(0,o.jsx)(I.A,{}):(0,o.jsx)(L.A,{})})}),(0,o.jsx)(p.A,{component:"th",scope:"row",children:t.isAdmin&&(0,o.jsx)(b.A,{})}),(0,o.jsx)(p.A,{component:"th",scope:"row",children:t.name}),(0,o.jsx)(p.A,{align:"right",children:t.surname}),(0,o.jsx)(p.A,{align:"right",children:t.email}),(0,o.jsx)(p.A,{align:"right",children:t.phoneNumber}),(0,o.jsx)(p.A,{align:"right",children:t.blocked?(0,o.jsx)(y.A,{color:"warning"}):" "}),(0,o.jsx)(p.A,{align:"right",children:t.verified?(0,o.jsx)(f.A,{color:"success"}):(0,o.jsx)(Y.A,{variant:"contained",size:"small",onClick:async function(){await x.A.put("".concat("https://alphamares.com/","api/user/verify/").concat(t._id)).then((t=>{e.fetchUsers(),alert("Utilisateur v\xe9rifi\xe9")})).catch((e=>alert("Erreur : "+e.response.data)))},color:"error",children:"v\xe9rifier"})})]}),(0,o.jsx)(m.A,{children:(0,o.jsx)(p.A,{style:{paddingBottom:0,paddingTop:0},colSpan:8,children:(0,o.jsx)(F.A,{in:l,timeout:"auto",unmountOnExit:!0,children:(0,o.jsxs)(C.A,{sx:{margin:1},children:[(0,o.jsxs)(E.A,{variant:"h6",gutterBottom:!0,component:"div",children:[t.name," ",t.surname]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col",style:{width:"50%"},children:[(0,o.jsxs)(E.A,{style:{color:"black"},children:["Adresse : ",t.adress+" "+t.adressCity]}),(0,o.jsxs)(E.A,{style:{color:"black"},children:["Date de naissance : ",N()(t.birthDate).format("L")]}),(0,o.jsxs)(E.A,{style:{color:"black"},children:["Genre : ",t.gender]}),(0,o.jsxs)(E.A,{style:{color:"black"},children:["Type : ",t.type]}),t.isAdmin?(0,o.jsx)(E.A,{style:{color:"black"},children:"Admin : oui"}):(0,o.jsxs)(E.A,{style:{color:"black"},children:["Bloqu\xe9 : ",t.blocked?"Oui":"Non"]})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(Y.A,{variant:"contained",size:"small",onClick:()=>h(!0),children:"\xc9diter"}),(0,o.jsx)(Y.A,{variant:"contained",size:"small",onClick:()=>w(!0),style:{whiteSpace:"normal"},children:"Renvoyer mail de v\xe9rification"}),(0,o.jsx)(S.A,{"aria-label":"delete",disabled:t.isAdmin,onClick:()=>H(!0),children:(0,o.jsx)(A.A,{})})]})})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)(Y.A,{variant:"contained",size:"small",onClick:()=>j(!0),children:"Ench\xe9rir \xe0 sa place"}),(0,o.jsx)(Y.A,{variant:"contained",size:"small",onClick:()=>a(!0),children:"Historique des lots suivis"}),(0,o.jsx)(Y.A,{variant:"contained",size:"small",onClick:()=>c(!0),children:"Historique des ench\xe8res"}),(0,o.jsx)(Y.A,{variant:"contained",size:"small",disabled:t.isAdmin,onClick:()=>T(!0),children:t.blocked?"D\xe9bloquer":"Bloquer"})]}),(0,o.jsx)("br",{})]})})})}),(0,o.jsx)(R,{open:i,onClose:()=>a(!1),user:t}),(0,o.jsx)(D,{open:r,onClose:()=>c(!1),user:t}),(0,o.jsx)(V,{open:d,onClose:()=>h(!1),user:t}),(0,o.jsx)(K,{open:u,onClose:()=>j(!1),user:t}),(0,o.jsx)(v.A,{message:"envoyer le mail de v\xe9rification \xe0 nouveau",open:g,yesFunction:async function(){w(!1),await x.A.post("".concat("https://alphamares.com/","api/verif/email-verification/").concat(t.email),{userId:t._id,user:t}).then((t=>{e.fetchUsers(),alert("Mail de v\xe9rification envoy\xe9")})).catch((e=>alert("Erreur : "+e.response.data)))},onClose:()=>w(!1)}),(0,o.jsx)(v.A,{message:"supprimer cet utilisateur de mani\xe8re d\xe9finitive",open:B,yesFunction:async function(){H(!1),x.A.delete("".concat("https://alphamares.com/","api/user/").concat(t._id)).then((l=>{e.fetchUsers(),alert("Utilisateur ".concat(t.email," supprim\xe9"))})).catch((e=>console.log(e)))},onClose:()=>H(!1)}),(0,o.jsx)(v.A,{message:t.blocked?"d\xe9bloquer cet utilisateur":"bloquer cet utilisateur",open:k,yesFunction:async function(){T(!1),await x.A.put("".concat("https://alphamares.com/","api/user/block/").concat(t._id),{blocked:!t.blocked}).then((l=>{e.fetchUsers(),alert("Utilisateur ".concat(t.blocked?"d\xe9bloqu\xe9":"bloqu\xe9"))})).catch((e=>alert("Erreur : "+e.response.data)))},onClose:()=>T(!1)})]})}const X=function(){const[e,t]=(0,s.useState)([]);async function l(){await x.A.get("".concat("https://alphamares.com/","api/user/")).then((l=>{JSON.stringify(e)!==JSON.stringify(l.data)&&t(l.data)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{l()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(g.A,{children:(0,o.jsxs)(h.A,{sx:{minWidth:650},size:"small","aria-label":"user table",children:[(0,o.jsx)(j.A,{children:(0,o.jsxs)(m.A,{children:[(0,o.jsx)(p.A,{}),(0,o.jsx)(p.A,{children:(0,o.jsx)(b.A,{})}),(0,o.jsx)(p.A,{children:"Nom"}),(0,o.jsx)(p.A,{align:"right",children:"Pr\xe9nom"}),(0,o.jsx)(p.A,{align:"right",children:"Email"}),(0,o.jsx)(p.A,{align:"right",children:"T\xe9l\xe9phone"}),(0,o.jsx)(p.A,{align:"right",children:"Bloqu\xe9"}),(0,o.jsx)(p.A,{align:"right",children:"V\xe9rifi\xe9"})]})}),(0,o.jsx)(u.A,{children:!(0,_.Im)(e)&&e.map((e=>(0,o.jsx)(Z,{user:e,fetchUsers:l},e.email)))})]})}),(0,o.jsx)("br",{})]})},$=()=>(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Administration des utilisateurs."})}),(0,o.jsx)("br",{}),(0,o.jsx)(X,{})]});var ee=l(92622),te=l(35316),le=l(92823),se=l.n(le),ne=(l(3140),se().Quill.import("formats/font"));ne.whitelist=["arapey","arial","georgia","helvetica","times-new-roman"],se().Quill.register(ne,!0);function ie(e){const{onClose:t,open:l,fetchPosts:n}=e,[i,a]=(0,s.useState)({titleFR:"",titleEN:"",video:"",picture:""}),[r,c]=(0,s.useState)("");(0,s.useEffect)((()=>{a({titleFR:"",titleEN:"",video:"",picture:""}),c("")}),[l]);const d=e=>{const{name:t,value:l}=e.target;a({...i,[t]:l})},h={toolbar:[[{header:[1,2,!1]}],[{font:ne.whitelist}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}]]},u=["header","font","bold","italic","underline","strike","align"],[p,j]=(0,s.useState)();const[m,g]=(0,s.useState)();return(0,o.jsxs)(T.A,{onClose:t,open:l,className:"create-post-dialog",children:[(0,o.jsxs)(k.A,{children:["Cr\xe9er un post",(0,o.jsx)(Y.A,{onClick:t,sx:{position:"absolute",right:10,top:10},children:"\u2715"})]}),(0,o.jsx)(te.A,{children:(0,o.jsxs)("form",{className:"form-container",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("img",{src:"./img/icons/french_flag.svg",alt:"french flag"}),(0,o.jsx)("label",{children:"Titre :"}),(0,o.jsx)("input",{type:"text",name:"titleFR",value:i.titleFR,onChange:d,required:!0,minLength:3,maxLength:30})]}),(0,o.jsx)("div",{className:"preview-editor",children:(0,o.jsx)(se(),{value:p,modules:h,formats:u,placeholder:"Message en fran\xe7ais...",onChange:function(e){j(e)}})})]}),(0,o.jsx)("br",{}),(0,o.jsx)("hr",{}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("img",{src:"./img/icons/UK_flag.svg",alt:"UK flag"}),(0,o.jsx)("label",{children:"Titre en anglais :"}),(0,o.jsx)("input",{type:"text",name:"titleEN",value:i.titleEN,onChange:d,required:!0,minLength:3,maxLength:30})]}),(0,o.jsx)("div",{className:"preview-editor",children:(0,o.jsx)(se(),{value:m,modules:h,formats:u,placeholder:"Message en anglais...",onChange:function(e){g(e)}})})]}),(0,o.jsxs)("div",{children:[(0,_.Im)(i.postPicture)&&(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("label",{children:"Lien d'une vid\xe9o (notez bien que c'est soit une video soit une image) :"}),(0,o.jsx)("input",{type:"text",name:"video",value:i.video,onChange:function(e){const t=e.target.value.replace("watch?v=","embed/");a({...i,video:t.split("&")[0]})}})]}),(0,_.Im)(i.video)&&(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("label",{children:"Charger une image :"}),(0,o.jsx)("input",{type:"file",id:"file-upload",name:"file",accept:".jpg, .jpeg, .png",onChange:e=>(e=>{a({...i,video:""}),c(e.target.files[0])})(e)})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:e=>{e.preventDefault();const l=new FormData;l.append("titleFR",i.titleFR),l.append("titleEN",i.titleEN),l.append("messageFR",p),l.append("messageEN",m),l.append("picture",r),l.append("video",i.video),x.A.post("".concat("https://alphamares.com/","api/post/"),l).then((e=>{n(),t()})).catch((e=>{t(),alert("LIMIT_FILE_SIZE"===e.response.data?"Erreur : le fichier est trop VOLUMINEUX (8Mo max)":e.response.data)}))},children:"Cr\xe9er le post"})]})})]})}const ae=()=>{const[e,t]=(0,s.useState)([]),[l,n]=(0,s.useState)(!1);function i(){x.A.get("".concat("https://alphamares.com/","api/post/")).then((e=>t(e.data))).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{i()}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Administration des M\xe9dias."})}),(0,o.jsx)("br",{}),(0,o.jsx)(Y.A,{variant:"contained",onClick:()=>n(!0),style:{margin:"1%"},children:" Cr\xe9er un post"}),!(0,_.Im)(e)&&e.slice().map((e=>(0,o.jsx)(ee.A,{post:e,inAdmin:!0,fetchPosts:i},e._id))),(0,o.jsx)(ie,{open:l,onClose:()=>n(!1),fetchPosts:i}),(0,o.jsx)("br",{})]})};var re=l(41364),ce=l(17186),oe=l(40710),de=l(86605),xe=l(21337);function he(){const[e,t]=(0,s.useState)();let l;function n(){x.A.get("".concat("https://alphamares.com/","api/auction/")).then((e=>{e.data&&JSON.stringify(l)!==JSON.stringify(e.data)&&(t(e.data),l=e.data)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{n();const e=setInterval((()=>n()),5e3);return()=>clearInterval(e)}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Historique des ench\xe9rissements."})}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{rowGap:"10px",display:"flex",flexDirection:"column",width:"70%"},children:!(0,_.Im)(e)&&(0,o.jsx)(ue,{auctions:e})}),(0,o.jsx)("br",{})]})}function ue(e){let{auctions:t}=e;const[l,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[r,c]=(0,s.useState)(),d=e=>(t,l)=>{var s;n(!!l&&e),s=e,x.A.get("".concat("https://alphamares.com/","api/auction/lots/").concat(s)).then((e=>c(e.data))).catch((e=>console.log(e)))};return(0,o.jsx)("div",{children:t.slice().reverse().map((e=>(0,o.jsxs)(ce.A,{expanded:l===e._id,onChange:d(e._id),children:[(0,o.jsxs)(de.A,{expandIcon:(0,o.jsx)(xe.A,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex",gap:"10px"},children:[(0,o.jsx)(E.A,{sx:{color:"black",flex:"2"},children:e.title}),(0,o.jsxs)(E.A,{sx:{color:"text.secondary",flex:"1"},children:["Date : ",N()(e.start).format("LLL")]}),(0,o.jsxs)(E.A,{sx:{color:"text.secondary",flex:"1"},children:[e.catalogue.length," lots"]})]}),(0,o.jsx)(oe.A,{children:!(0,_.Im)(r)&&r.slice().map((e=>{return(0,o.jsxs)(ce.A,{expanded:i===e._id,onChange:(t=e._id,(e,l)=>{a(!!l&&t)}),children:[(0,o.jsxs)(de.A,{expandIcon:(0,o.jsx)(xe.A,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex"},children:[(0,o.jsxs)(E.A,{sx:{color:"black",flex:"3"},children:["Lot ",e.number," - ",e.title]}),(0,o.jsx)(E.A,{sx:{color:"text.secondary",flex:"1"},children:e.type}),(0,o.jsxs)(E.A,{sx:{color:"text.secondary",flex:"1"},children:[e.bids.length," ench\xe9rissements"]})]}),(0,o.jsx)(oe.A,{children:e.bids.slice().reverse().map((e=>(0,o.jsx)(re.A,{bid:e})))})]});var t}))})]},e._id)))})}const pe=()=>{const[e,t]=(0,s.useState)();return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"\xc9dition des documents l\xe9gaux."})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h3",{children:"Condition g\xe9n\xe9rale d'utilisation :"}),(0,o.jsx)("label",{htmlFor:"cgu",children:"Charger un document (pdf) :"}),(0,o.jsx)("input",{type:"file",id:"cgu",name:"cgu",accept:".pdf",style:{maxWidth:"30%",color:"black"},onChange:e=>t(e.target.files[0])}),(0,o.jsx)("br",{}),(0,o.jsx)(Y.A,{variant:"contained",onClick:async()=>{if(e){const t=new FormData;t.append("file",e),await x.A.post("".concat("https://alphamares.com/","api/utils/upload/cgu"),t).then((e=>{console.log("Success :"+e.data)})).catch((e=>console.log(e)))}else console.log("No file")},children:"Enregistrer"}),(0,o.jsx)("br",{}),(0,o.jsx)("hr",{style:{width:"40%",textAlign:"center",height:"3px",border:"0",backgroundColor:"white",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0))"}}),(0,o.jsx)("br",{}),(0,o.jsx)("h3",{children:"Politique de confidentialit\xe9 :"}),(0,o.jsx)("label",{htmlFor:"politiqueConf",children:"Charger un document (pdf) :"}),(0,o.jsx)("input",{type:"file",id:"politiqueConf",name:"politiqueConf",accept:".pdf",style:{maxWidth:"30%",color:"black"},onChange:e=>t(e.target.files[0])}),(0,o.jsx)("br",{}),(0,o.jsx)(Y.A,{variant:"contained",onClick:async()=>{if(e){const t=new FormData;t.append("file",e),await x.A.post("".concat("https://alphamares.com/","api/utils/upload/politiqueconf"),t).then((e=>{console.log("Success :"+e.data)})).catch((e=>console.log(e)))}else console.log("No file")},children:"Enregistrer"}),(0,o.jsx)("br",{}),(0,o.jsx)("hr",{style:{width:"40%",textAlign:"center",height:"3px",border:"0",backgroundColor:"white",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0))"}}),(0,o.jsx)("br",{}),(0,o.jsx)("h3",{children:"Copyright :"}),(0,o.jsx)("label",{htmlFor:"copyright",children:"Charger un document (pdf) :"}),(0,o.jsx)("input",{type:"file",id:"copyright",name:"copyright",accept:".pdf",style:{maxWidth:"30%",color:"black"},onChange:e=>t(e.target.files[0])}),(0,o.jsx)("br",{}),(0,o.jsx)(Y.A,{variant:"contained",onClick:async()=>{if(e){const t=new FormData;t.append("file",e),await x.A.post("".concat("https://alphamares.com/","api/utils/upload/copyright"),t).then((e=>{console.log("Success :"+e.data)})).catch((e=>console.log(e)))}else console.log("No file")},children:"Enregistrer"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]})};var je=l(85983);function me(){const[e,t]=(0,s.useState)(),[l,n]=(0,s.useState)(),[i,a]=(0,s.useState)(!0),[r,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1);let u,p;function j(){x.A.get("".concat("https://alphamares.com/","api/auction/currentAuctionLots")).then((e=>{void 0!==e&&JSON.stringify(p)!==JSON.stringify(e.data.lots)&&(n(e.data.lots),p=e.data.lots),void 0!==e&&JSON.stringify(u)!==JSON.stringify(e.data.currentAuction)&&(t(e.data.currentAuction),u=e.data.currentAuction),void 0!==e&&void 0!==e.data.currentAuction&&N()(e.data.currentAuction.end).add(5*(e.data.currentAuction.catalogue.length-1),"m").isBefore(N()())?a(!1):a(!0)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{j();const e=setInterval((()=>j()),3e3);return()=>clearInterval(e)}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:(0,o.jsx)("h1",{children:"Ench\xe8re en cours"})}),(0,o.jsx)("br",{}),(0,_.Im)(e)?(0,o.jsx)("h2",{style:{margin:"auto"},children:"Pas d'ench\xe8re en cours"}):(0,o.jsxs)("div",{style:{width:"90%"},children:[(0,o.jsx)("div",{className:"col",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{border:"3px solid",borderRadius:"20px",padding:"5%",color:"rgb(239, 193, 109)"},children:[(0,o.jsxs)("h2",{style:{fontSize:"3rem",display:"flex",gap:"20px"},children:[" ","Titre :"," ",(0,o.jsx)("p",{style:{fontSize:"2.8rem",color:"white"},children:e.title})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("h2",{style:{fontSize:"2.5rem",display:"flex",gap:"20px"},children:[" ","Sous-titre :"," ",(0,o.jsx)("p",{style:{fontSize:"2.2rem",color:"white"},children:e.subtitle})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("h2",{style:{fontSize:"1.8rem",display:"flex",gap:"20px"},children:[" ","D\xe9but :"," ",(0,o.jsx)("p",{style:{fontSize:"1.6rem",color:"white"},children:N()(e.start).format("LLL")})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("h2",{style:{fontSize:"1.8rem",display:"flex",gap:"20px"},children:[" ","Fin :"," ",(0,o.jsxs)("p",{style:{fontSize:"1.6rem",color:"white"},children:[N()(e.end).format("LLL")," (dernier lot :"," ",N()(e.end).add(5*(e.catalogue.length-1),"m").format("LLL"),")"]})]}),(0,o.jsx)("br",{}),(0,o.jsx)(Y.A,{variant:"contained",onClick:()=>{c(!0)},children:"\xc9diter"}),(0,o.jsx)(Y.A,{sx:{marginInline:"5%"},variant:"contained",onClick:()=>h(!0),disabled:i,children:"Cloturer la vente"})]}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{children:!(0,_.Im)(l)&&l.slice().sort(((e,t)=>e.number-t.number)).map((e=>(0,o.jsxs)(ce.A,{expanded:!0,children:[(0,o.jsxs)(de.A,{"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex"},children:[(0,o.jsxs)(E.A,{sx:{color:"black",flex:"1"},children:[" ",(0,o.jsxs)("strong",{children:[e.number," - ",e.title]})," "]}),(0,o.jsx)(E.A,{sx:{color:"text.secondary",flex:"1"},children:e.type}),(0,o.jsxs)(E.A,{sx:{color:"text.secondary",flex:"1"},children:[e.bids.length," ench\xe9rissements"]})]}),(0,o.jsx)(oe.A,{children:!(0,_.Im)(e.bids)&&e.bids.slice().reverse().map(((e,t)=>(0,o.jsx)(be,{bid:e,isLast:0===t},e._id)))})]})))})]})}),(0,o.jsx)(ge,{open:r,onClose:()=>{r&&c(!1)},auction:e}),(0,o.jsx)(v.A,{message:"cloturer la vente",open:d,onClose:()=>h(!1),yesFunction:function(){h(!1),(0,_.Im)(e)||x.A.patch("".concat("https://alphamares.com/","api/auction/close/").concat(e._id)).then((()=>alert("Ench\xe8re ferm\xe9e avec succ\xe8s !"))).catch((e=>alert("Erreur : "+e)))}})]}),(0,o.jsx)("br",{})]})}function ge(e){const{open:t,onClose:l,auction:s}=e;return(0,o.jsxs)(T.A,{onClose:l,open:t,PaperProps:{sx:{padding:"2%"}},children:[(0,o.jsx)(k.A,{children:"\xc9diter la vente"}),(0,o.jsx)(je.A,{onClose:l,auction:s})]})}function be(e){const{bid:t,isLast:l}=e,[n,i]=(0,s.useState)(),[a,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{x.A.get("".concat("https://alphamares.com/","api/user/").concat(t.bidderId)).then((e=>{const t=e.data;i(t)})).catch((e=>console.log(e)))}),[]),(0,o.jsxs)("div",{style:{width:"100%"},children:[void 0!==n&&(0,o.jsxs)(m.A,{sx:{width:"100%",display:"flex"},children:[(0,o.jsxs)(p.A,{sx:{flex:"6",padding:"5px 2px"},align:"left",children:[(0,o.jsxs)("strong",{children:[n.name," ",n.surname]})," ","- (",n.type,")"," "]}),(0,o.jsxs)(p.A,{sx:{flex:"6",padding:"5px 2px"},align:"left",children:[" ",n.email]}),(0,o.jsxs)(p.A,{sx:{flex:"4",padding:"5px 2px"},align:"left",children:[" ",n.phoneNumber]}),(0,o.jsx)(p.A,{sx:{flex:"4",padding:"5px 2px"},align:"right",children:(0,o.jsxs)("strong",{children:[t.amount," \u20ac"]})}),(0,o.jsxs)(p.A,{sx:{flex:"4",padding:"5px 2px"},align:"right",children:[N()(t.createdAt).format("LLL")," "]}),(0,o.jsx)(p.A,{sx:{flex:"1",padding:"5px 2px"},align:"right",children:l&&(0,o.jsx)(A.A,{className:"delete",onClick:()=>r(!0)})})]}),a&&(0,o.jsx)(v.A,{message:"supprimer cette ench\xe8re",open:a,onClose:()=>r(!1),yesFunction:async function(){r(!1),await x.A.delete("".concat("https://alphamares.com/","api/bid/").concat(t._id),t).then((e=>alert("Ench\xe8re supprim\xe9e !"))).catch((e=>alert("Erreur : "+e)))}})]})}var fe=l(84867);const ye=JSON.parse('{"P":"FR76 1660 6000 0184 8877 3118 638","H":"AGRIFRPP866"}');fe.KQ.register({family:"Roboto",src:"https://fonts.googleapis.com/css?family=Roboto"});const Ae=fe.vv.create({container:{display:"flex",flexDirection:"row",paddingBottom:20},h1:{fontFamily:"Helvetica-Bold",marginBottom:5},h2:{fontSize:20,fontFamily:"Helvetica-Bold",display:"flex",alignSelf:"flex-end",marginBottom:"20px"},left:{flex:1,lineHeight:"1.6px",fontSize:10},right:{display:"flex",alignSelf:"flex-end",lineHeight:"1.6px",fontSize:10},rightContainer:{marginTop:"50px"},body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35,fontFamily:"Helvetica"},title:{fontSize:10,textDecoration:"underline",marginBottom:"5px"},text:{fontSize:10,lineHeight:"1.3px",textAlign:"justify"},bold:{fontFamily:"Helvetica-Bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},table:{display:"table",width:"100%",marginTop:15,marginBottom:10},tableRow:{flexDirection:"row"},tableCell:{padding:4,borderWidth:1,borderColor:"#000",fontSize:10,textAlign:"center"},tableHeader:{backgroundColor:"#f2f2f2",fontFamily:"Helvetica-Bold"},tableTotal:{marginTop:10},info:{marginTop:"25px"}});function ve(e){const t=e.sale,l=e.user,n=e.auction,i=t.lot,a=t.bid,r=1+i.tva/100,c=n.commission/100,d=a.amount,h=d*c,u=d*r,p=1.2*h,j=d*(i.tva/100)+.2*h,m=u+p,[g,b]=(0,s.useState)();function f(){return(0,o.jsxs)(fe.Ss,{style:Ae.container,children:[(0,o.jsxs)(fe.Ss,{style:Ae.left,children:[(0,o.jsx)(fe.EY,{style:Ae.h1,children:"Facture \xe9mise par la soci\xe9t\xe9 :"}),(0,o.jsx)(fe.EY,{children:"ALPHA MARES SARL"}),(0,o.jsx)(fe.EY,{children:"La Poupri\xe8re 61250 SEMALLE - FRANCE"}),(0,o.jsx)(fe.EY,{children:"contact@alphamares.com"}),(0,o.jsx)(fe.EY,{children:"+33 6 33 34 66 54 "}),(0,o.jsx)(fe.EY,{children:"SIRET : 95076126200019"}),(0,o.jsx)(fe.EY,{children:"N\xb0 de TVA : FR59950761262"})]}),(0,o.jsxs)(fe.Ss,{style:Ae.right,children:[(0,o.jsx)(fe.EY,{style:Ae.h2,children:"Facture"}),(0,o.jsxs)(fe.Ss,{style:Ae.rightContainer,children:[(0,o.jsx)(fe.EY,{style:Ae.right,children:"Company"===l.type?l.companyName:l.name+" "+l.surname}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.adress}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.adressCity}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.phoneNumber}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.email}),(0,o.jsx)(fe.EY,{style:Ae.right,children:"Private"!==l.type?"N\xb0 de TVA : "+l.tvaNumber:""})]})]})]})}return(0,s.useEffect)((()=>{!async function(){x.A.get("".concat("https://alphamares.com/","api/sales/num-sales/").concat(t._id)).then((e=>{const t=e.data;t!==g&&b(t)})).catch((e=>console.log(e)))}()}),[e,g]),(0,o.jsx)(fe.yo,{children:(0,o.jsxs)(fe.YW,{size:"A4",style:Ae.body,children:[(0,o.jsx)(f,{}),(0,o.jsx)("br",{}),(0,o.jsx)(fe.EY,{style:Ae.text,children:(0,o.jsxs)(o.Fragment,{children:["Fait \xe0 ALEN\xc7ON, le ",N()().format("L")]})}),(0,o.jsx)("br",{}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:["N\xb0 de Facture : ",N()(t.updatedAt).format("L").replace(/\//g,"")+g]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:["Nom de la vente : ",n.title]}),(0,o.jsxs)(fe.Ss,{style:Ae.table,children:[(0,o.jsxs)(fe.Ss,{style:[Ae.tableRow,Ae.tableHeader],children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"N\xb0 de Lot"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"Nom du Lot"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"Montant (en \u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"TVA (en %)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"Prix TTC (en \u20ac)"})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:i.number}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"".concat(Se(i.type)," ").concat(i.pedigree.gen1.father," x ").concat(i.pedigree.gen1.mother)}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:d.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:i.tva}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:u.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"-"}),(0,o.jsxs)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:["Frais de vente (",n.commission," %)"]}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:h.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"20"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:p.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total HT (en \u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total frais de TVA (en \u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:j.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total TTC (en \u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:m.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]}),(0,o.jsxs)(fe.Ss,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,o.jsxs)(fe.Ss,{style:[Ae.table,{width:"40%"}],children:[(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2}],children:"Moyen de paiement "}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"Virement bancaire"})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2}],children:"A payer"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"A la r\xe9ception de la facture"})]})]}),(0,o.jsxs)(fe.Ss,{style:[Ae.table,{width:"50%"}],children:[(0,o.jsx)(fe.Ss,{style:[Ae.tableRow,Ae.tableHeader],children:(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{width:"100%",textAlign:"center"}],children:"R\xe9capitulatif TVA"})}),(0,o.jsxs)(fe.Ss,{style:[Ae.tableRow,Ae.tableHeader],children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"Taux"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"Base HT"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"TVA"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"TTC"})]}),(0,o.jsxs)(fe.Ss,{style:[Ae.tableRow],children:[(0,o.jsxs)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:[(j/(d+h)*100).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")," %"]}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:j.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:m.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]})]}),(0,o.jsxs)(fe.Ss,{style:Ae.info,children:[(0,o.jsx)(fe.EY,{style:[Ae.title,Ae.bold],children:"Coordonn\xe9es bancaires : "}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"Titulaire du compte :"})," ALPHA MARES"]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"IBAN : "}),ye.P]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"BIC : "})," ",ye.H]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"Domiciliation :"})," Cr\xe9dit Agricole"]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"Adresse :"})," 15 Cours Clemenceau 61000 Alen\xe7on"]})]}),(0,o.jsxs)(fe.Ss,{style:{marginTop:"10px"},children:[(0,o.jsx)(fe.EY,{style:[Ae.title,Ae.bold],children:"Rappel des r\xe8gles de paiement : "}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 Vous devez faire ce virement en euros."}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 Le paiement doit \xeatre r\xe9alis\xe9 en une seule fois."}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 Vous \xeates redevable de l'ensemble des frais, taxes, droits et pr\xe9l\xe8vements dus au titre de ce paiement."}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 En cas d'absence de paiement int\xe9gral dans le d\xe9lai de 7 jours \xe0 compter de la cl\xf4ture de la vente et de la r\xe9ception de la facture par l'acheteur, ALPHA MARES est libre d'annuler la vente ou d'appliquer des int\xe9r\xeats de retard au taux en vigueur."})]}),(0,o.jsx)(fe.EY,{style:Ae.pageNumber,render:e=>{let{pageNumber:t,totalPages:l}=e;return"".concat(t," / ").concat(l)}})]})})}function Ce(e){const t=e.sale,l=e.user,n=e.auction,i=t.lot,a=t.bid,r=1+i.tva/100,c=n.commission/100,d=a.amount,h=d*c,u=d*r,p=1.2*h,j=d*(i.tva/100)+.2*h,m=u+p,[g,b]=(0,s.useState)();function f(){return(0,o.jsxs)(fe.Ss,{style:Ae.container,children:[(0,o.jsxs)(fe.Ss,{style:Ae.left,children:[(0,o.jsx)(fe.EY,{style:Ae.h1,children:"Invoice issued by the compagny: "}),(0,o.jsx)(fe.EY,{children:"ALPHA MARES SARL"}),(0,o.jsx)(fe.EY,{children:"La Poupri\xe8re 61250 SEMALLE - FRANCE"}),(0,o.jsx)(fe.EY,{children:"contact@alphamares.com"}),(0,o.jsx)(fe.EY,{children:"+33 6 33 34 66 54 "}),(0,o.jsx)(fe.EY,{children:"SIRET : 95076126200019"}),(0,o.jsx)(fe.EY,{children:"VAT number : FR59950761262"})]}),(0,o.jsxs)(fe.Ss,{style:Ae.right,children:[(0,o.jsx)(fe.EY,{style:Ae.h2,children:"Invoice"}),(0,o.jsxs)(fe.Ss,{style:Ae.rightContainer,children:[(0,o.jsxs)(fe.EY,{style:Ae.right,children:[l.name," ",l.surname]}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.adress}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.adressCity}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.phoneNumber}),(0,o.jsx)(fe.EY,{style:Ae.right,children:l.email}),(0,o.jsx)(fe.EY,{style:Ae.right,children:void 0!==l.tvaNumber?"VAT number : "+l.tvaNumber:""})]})]})]})}return(0,s.useEffect)((()=>{!async function(){x.A.get("".concat("https://alphamares.com/","api/sales/num-sales/").concat(t._id)).then((e=>{const t=e.data;t!==g&&b(t)})).catch((e=>console.log(e)))}()}),[e,g]),(0,o.jsx)(fe.yo,{children:(0,o.jsxs)(fe.YW,{size:"A4",style:Ae.body,children:[(0,o.jsx)(f,{}),(0,o.jsx)("br",{}),(0,o.jsx)(fe.EY,{style:Ae.text,children:(0,o.jsxs)(o.Fragment,{children:["ALEN\xc7ON, ",N()().format("L")]})}),(0,o.jsx)("br",{}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:["Invoice number : ",N()(t.updatedAt).format("L").replace(/\//g,"")+g]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:["Name of the event : ",n.titleEN]}),(0,o.jsxs)(fe.Ss,{style:Ae.table,children:[(0,o.jsxs)(fe.Ss,{style:[Ae.tableRow,Ae.tableHeader],children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"Lot No."}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"Name"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"Amount ( \u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"VAT (%)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"Including VAT (en \u20ac)"})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:i.number}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"".concat(Ee(i.type)," ").concat(i.pedigree.gen1.father," x ").concat(i.pedigree.gen1.mother)}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:d.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:i.tva}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:u.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"-"}),(0,o.jsxs)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:["Selling fees (",n.commission," %)"]}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:h.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:"20"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:2}],children:p.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total amount excluding VAT (\u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"VAT amount (\u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:j.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total amount including VAT (\u20ac)"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:m.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]}),(0,o.jsxs)(fe.Ss,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,o.jsxs)(fe.Ss,{style:[Ae.table,{width:"40%"}],children:[(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2}],children:"Method of payement "}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"Bank transfer"})]}),(0,o.jsxs)(fe.Ss,{style:Ae.tableRow,children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,Ae.tableHeader,{flex:2}],children:"To be paid"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:3}],children:"Upon receipt"})]})]}),(0,o.jsxs)(fe.Ss,{style:[Ae.table,{width:"50%"}],children:[(0,o.jsx)(fe.Ss,{style:[Ae.tableRow,Ae.tableHeader],children:(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{width:"100%",textAlign:"center"}],children:"VAT summary"})}),(0,o.jsxs)(fe.Ss,{style:[Ae.tableRow,Ae.tableHeader],children:[(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"Rate"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"Excl. VAT"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"VAT"}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:"Incl. VAT"})]}),(0,o.jsxs)(fe.Ss,{style:[Ae.tableRow],children:[(0,o.jsxs)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:[(j/(d+h)*100).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")," %"]}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:j.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(fe.EY,{style:[Ae.tableCell,{flex:1}],children:m.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]})]}),(0,o.jsxs)(fe.Ss,{children:[(0,o.jsx)(fe.EY,{style:[Ae.title,Ae.bold],children:"Bank details : "}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"Account holder :"})," ALPHA MARES"]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"IBAN : "}),ye.P]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"BIC : "}),ye.H]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"Bank agency :"})," Cr\xe9dit Agricole"]}),(0,o.jsxs)(fe.EY,{style:Ae.text,children:[(0,o.jsx)(fe.EY,{style:Ae.bold,children:"Adress :"})," 15 Cours Clemenceau 61000 Alen\xe7on"]})]}),(0,o.jsxs)(fe.Ss,{style:{marginTop:"10px"},children:[(0,o.jsx)(fe.EY,{style:[Ae.title,Ae.bold],children:"Payement rules :"}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 You must make this transfer in euros."}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 The payment must be made in a single transfer."}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 You are liable for all charges, taxes, duties and levies due in respect of this payment."}),(0,o.jsx)(fe.EY,{style:Ae.text,children:"  \u2022 In the event of absence of full payment within 7 days from the closing of the sale and receipt of the invoice by the buyer, ALPHA MARES is free to cancel the sale or to apply interests for late payment at the current rate."})]}),(0,o.jsx)(fe.EY,{style:Ae.pageNumber,render:e=>{let{pageNumber:t,totalPages:l}=e;return"".concat(t," / ").concat(l)}})]})})}const Ee=e=>{switch(e){case"FrozenEmbryo":return"Frozen Embryo";case"ImplantedEmbryo":return"Implanted Embryo";case"Foal":return"Foal";case"Yearling":return"Yearling";case"YoungHorse":return"Young Horse";case"BroodmareFull":return"BroodmareFull";case"BroodmareEmpty":return"BroodmareEmpty";case"Stallion":return"Stallion";default:return""}},Se=e=>{switch(e){case"FrozenEmbryo":return"Embryon congel\xe9";case"ImplantedEmbryo":return"Embryon implant\xe9";case"Foal":return"Poulain";case"Yearling":return"Yearling";case"YoungHorse":return"Jeune cheval";case"BroodmareFull":return"Poulini\xe8re pleine";case"BroodmareEmpty":return"Poulini\xe8re vide";case"Stallion":return"\xc9talon";default:return""}};var Ye=l(29347);function we(){const[e,t]=(0,s.useState)([]),[l]=(0,O.Bd)(),[n,i]=(0,s.useState)(!1);let a;function r(){x.A.get("".concat("https://alphamares.com/","api/auction/auctionsWithSales/")).then((e=>{JSON.stringify(a)!==JSON.stringify(e.data)&&(t(e.data),a=e.data)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{r();const e=setInterval((()=>r()),1e4);return()=>clearInterval(e)}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Facturation"})}),(0,o.jsx)("br",{}),!(0,_.Im)(e)&&(0,o.jsx)("div",{style:{textAlign:"center",width:"85%"},children:e.slice().reverse().map((e=>{return(0,o.jsxs)("div",{children:[(0,o.jsxs)(ce.A,{expanded:n===e.auction._id,onChange:(t=e.auction._id,(e,l)=>{i(!!l&&t)}),children:[(0,o.jsxs)(de.A,{expandIcon:(0,o.jsx)(xe.A,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex",gap:"10px"},children:[(0,o.jsx)(E.A,{sx:{color:"black",flex:"3",fontWeight:"bold"},children:e.auction.title}),(0,o.jsx)(E.A,{sx:{color:"text.secondary",flex:"1"},children:N()(e.auction.start).format("LL")}),(0,o.jsxs)(E.A,{sx:{color:"text.secondary",flex:"1"},children:[void 0!==e.auction.sales?e.auction.sales.length:""," ventes"]})]}),(0,o.jsx)(oe.A,{children:e.sales.slice().map((t=>(0,o.jsx)(Ne,{sale:t,auction:e.auction,t:l,fetch:r},t.sale._id)))})]}),(0,o.jsx)("br",{})]},e.auction._id);var t}))})]})}const Ne=e=>{const{sale:t,auction:l,t:n,fetch:i}=e,[a,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1);return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",whiteSpace:"nowrap",margin:"2%"},children:[(0,o.jsxs)("div",{style:{textAlign:"start",marginRight:"2vw",overflow:"clip"},children:[(0,o.jsxs)(E.A,{sx:{color:"black"},children:[(0,o.jsxs)("strong",{children:["Lot ",t.sale.lot.number," :"]})," ",t.sale.lot.title," (",n("Lot."+t.sale.lot.type),")"]}),(0,o.jsxs)(E.A,{sx:{color:"black"},children:[(0,o.jsx)("strong",{children:"Ench\xe9risseur :"})," ",t.user.name,"  ",t.user.surname," (",t.user.email," - ",t.user.phoneNumber,")"]})]}),t.sale.isBillSent?(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{href:"".concat("https://alphamares.com/").concat(t.sale.bill),target:"_blank",rel:"noreferrer",style:{color:"black",fontWeight:"bold",textDecoration:"underline",marginInline:"20px"},children:"Facture"}),(0,o.jsx)(Y.A,{variant:"contained",onClick:()=>h(!0),sx:{marginLeft:"5%"},disabled:a,children:"Ins\xe9rer"}),(0,o.jsx)(Le,{open:x,message:"remplacer la facture actuelle",insertType:!0,sale:t.sale,auction:l,setSending:r,blob:"",onClose:()=>h(!1),fetch:i})]}):(0,o.jsx)(fe.XP,{document:"English"===t.user.language?(0,o.jsx)(Ce,{sale:t.sale,user:t.user,auction:l}):(0,o.jsx)(ve,{sale:t.sale,user:t.user,auction:l}),fileName:"Sale"+t.sale._id+".pdf",children:e=>{let{blob:s,url:n,loading:u,error:p}=e;return u?(0,o.jsx)("h1",{children:"G\xe9n\xe9ration..."}):(0,o.jsxs)("div",{style:{display:"flex",gap:"2%"},children:[(0,o.jsx)(Y.A,{variant:"contained",onClick:e=>{e.preventDefault(),window.open(n,"_blank")},children:"Facture automatique"}),(0,o.jsx)(Y.A,{variant:"contained",onClick:e=>{e.preventDefault(),d(!0)},sx:{backgroundColor:"orange"},disabled:a,children:"Envoyer"}),(0,o.jsx)(Y.A,{variant:"contained",onClick:e=>{e.preventDefault(),h(!0)},sx:{backgroundColor:"orange"},disabled:a,children:"Ins\xe9rer"}),(0,o.jsx)(Le,{open:c,message:"envoyer facture automatique",insertType:!1,sale:t.sale,auction:l,setSending:r,blob:s,onClose:()=>d(!1),fetch:i}),(0,o.jsx)(Le,{open:x,message:"envoyer une facture locale",insertType:!0,sale:t.sale,auction:l,setSending:r,blob:s,onClose:()=>h(!1),fetch:i})]})}})]},t.sale._id)},Le=e=>{const{open:t,insertType:l,message:n,sale:i,auction:a,setSending:r,blob:c,onClose:d,fetch:h}=e,[u,p]=(0,s.useState)(null);return(0,o.jsx)(Ie,{open:t,message:n,insertType:l,yesFunction:l?async function(){if(d(),u){const e=new FormData;e.append("saleId",i._id),e.append("userId",i.userId),e.append("auctionId",a._id),e.append("bill",u,i._id+".pdf"),r(!0),await x.A.post("".concat("https://alphamares.com/","api/user/modifyBill/"),e).then((()=>h())).catch((e=>console.error(e))),r(!1)}}:async function(){d();const e=new FormData;e.append("saleId",i._id),e.append("userId",i.userId),e.append("auctionId",a._id),e.append("bill",c,i._id+".pdf"),r(!0),await x.A.post("".concat("https://alphamares.com/","api/user/sendBill/"),e).then((()=>h())).catch((e=>console.error(e))),r(!1)},file:u,setFile:p,onClose:function(){d(),p(null)}})},Ie=e=>{const{open:t,message:l,insertType:s,yesFunction:n,file:i,setFile:a,onClose:r}=e;return(0,o.jsxs)(T.A,{onClose:r,open:t,className:"confirm-dialog",children:[(0,o.jsx)("p",{className:"message",children:"\xcates-vous s\xfbr de vouloir"}),(0,o.jsxs)("p",{className:"message",children:[l," ?"]}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("input",{className:"input-bill",type:"file",name:"localBill",id:"localBill",accept:"application/pdf",onChange:e=>a(e.target.files[0])})]}),(0,o.jsxs)(Ye.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,o.jsx)("button",{onClick:n,disabled:!!s&&!i,children:"Oui"}),(0,o.jsx)("button",{onClick:r,children:"Non"})]})]})};function Fe(){return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Onglet en devenir..."})}),(0,o.jsx)("br",{})]})}const ke=()=>{const[e,t]=s.useState(0);(0,s.useEffect)((()=>{const e=sessionStorage.getItem("activeTab");null!==e&&t(parseInt(e))}),[]);return(0,o.jsxs)("div",{className:"subNavBar",children:[(0,o.jsxs)(a.A,{value:e,onChange:(e,l)=>{t(l),sessionStorage.setItem("activeTab",l.toString())},textColor:"inherit",indicatorColor:"primary",centered:!0,children:[(0,o.jsx)(r.A,{label:"Ventes"}),(0,o.jsx)(r.A,{label:"Utilisateurs"}),(0,o.jsx)(r.A,{label:"M\xe9dia"}),(0,o.jsx)(r.A,{label:"Ench\xe9rissement"}),(0,o.jsx)(r.A,{label:"Ench\xe8re en cours"}),(0,o.jsx)(r.A,{label:"Facturation"}),(0,o.jsx)(r.A,{label:"Document l\xe9gaux"}),(0,o.jsx)(r.A,{label:"Commissaire priseur"})]}),0===e&&(0,o.jsx)(d,{}),1===e&&(0,o.jsx)($,{}),2===e&&(0,o.jsx)(ae,{}),3===e&&(0,o.jsx)(he,{}),4===e&&(0,o.jsx)(me,{}),5===e&&(0,o.jsx)(we,{}),6===e&&(0,o.jsx)(pe,{}),7===e&&(0,o.jsx)(Fe,{})]})},Te=()=>(0,i.d4)((e=>e.userReducer)).isAdmin?(0,o.jsxs)("div",{className:"admin",children:[(0,o.jsx)(ke,{}),(0,o.jsx)(n.BV,{children:(0,o.jsx)(n.qh,{path:"/admin/ventes",element:(0,o.jsx)(d,{})})})]}):(0,o.jsx)("h3",{style:{textAlign:"center",margin:"auto"},children:"UNHAUTHORIZED"})},72858:()=>{}}]);
//# sourceMappingURL=261.770aec1f.chunk.js.map