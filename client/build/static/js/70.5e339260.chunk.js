(self.webpackChunkalphamares_client=self.webpackChunkalphamares_client||[]).push([[70],{3123:(e,t,l)=>{"use strict";l.d(t,{Z:()=>c});var s=l(2791),n=l(1243),i=l(2426),a=l.n(i),r=l(184);function c(e){const[t,l]=(0,s.useState)({title:e.auction.title,titleEN:e.auction.titleEN,start:e.auction.start,end:e.auction.end,commission:e.auction.commission,description:e.auction.description,descriptionEN:e.auction.descriptionEN}),[i,c]=(0,s.useState)(),o=e=>{const{name:s,value:n}=e.target;l({...t,[s]:n})};return(0,r.jsx)("div",{style:{margin:"5% 1%",padding:"5%"},children:(0,r.jsxs)("form",{children:[(0,r.jsxs)("label",{children:["Titre :",(0,r.jsx)("input",{type:"text",name:"title",value:t.title,onChange:o,minLength:3,maxLength:30,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Titre en anglais :",(0,r.jsx)("input",{type:"text",name:"titleEN",value:t.titleEN,onChange:o,minLength:3,maxLength:30,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["D\xe9but :",(0,r.jsx)("input",{type:"datetime-local",name:"start",value:a()(t.start).format("YYYY-MM-DDTHH:mm"),onChange:o,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Fin :",(0,r.jsx)("input",{type:"datetime-local",name:"end",value:a()(t.end).format("YYYY-MM-DDTHH:mm"),onChange:o,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Commission acheteur (en %):",(0,r.jsx)("input",{type:"number",name:"commission",step:.1,value:t.commission,onChange:o,required:!0,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Description:",(0,r.jsx)("textarea",{type:"text",name:"description",value:t.description,onChange:o,minLength:3,maxLength:300,style:{border:"1px solid"}})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Description en anglais :",(0,r.jsx)("textarea",{type:"text",name:"descriptionEN",value:t.descriptionEN,onChange:o,minLength:3,maxLength:300,style:{border:"1px solid"}})]}),(0,r.jsx)("label",{htmlFor:"file",children:"Charger une image"}),(0,r.jsx)("input",{type:"file",id:"file",name:"file",accept:".jpg, .jpeg, .png",onChange:e=>c(e.target.files[0])}),(0,r.jsx)("br",{}),(0,r.jsx)("button",{onClick:l=>{l.preventDefault();const s=new FormData;s.append("title",t.title),s.append("titleEN",t.titleEN),s.append("start",t.start),s.append("end",t.end),s.append("description",t.description),s.append("descriptionEN",t.descriptionEN),s.append("commission",t.commission),s.append("picture",i),n.Z.put("".concat("http://localhost:5000/","api/auction/").concat(e.auction._id),s).then((()=>e.onClose())).catch((e=>{alert("LIMIT_FILE_SIZE"===e.response.data?"Erreur : le fichier est trop VOLUMINEUX (8Mo max)":e.response.data)}))},children:"\xc9diter la vente"})]})})}},6704:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Fe});var s=l(2791),n=l(7689),i=l(9434),a=l(5228),r=l(3896),c=l(8991),o=l(184);const d=()=>(0,o.jsxs)("div",{children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Administration des ventes"})}),(0,o.jsx)("br",{}),(0,o.jsx)(c.Z,{}),(0,o.jsx)("br",{})]});var x=l(1243),h=l(9836),u=l(3382),j=l(3994),p=l(6890),g=l(5855),m=l(5527),b=l(3437),f=l(8384),y=l(6711),v=l(7247),C=l(6753),Z=l(4554),w=l(890),N=l(3400),S=l(6151),A=l(2426),E=l.n(A),L=l(5172),F=l(5678),k=l(6125),I=l(5661),T=l(5574),B=l(1087);function R(e){const{open:t,onClose:l,user:n}=e,[i,a]=(0,s.useState)();return(0,s.useEffect)((()=>{x.Z.get("".concat("http://localhost:5000/","api/user/followedLotsInfos/").concat(n._id)).then((e=>{"No followed lot"!==e.data&&a(e.data)})).catch((e=>console.log(e)))}),[]),(0,o.jsxs)(T.Z,{onClose:l,open:t,fullWidth:!0,children:[(0,o.jsx)(I.Z,{children:"Lots suivis"}),(0,o.jsx)(s.Suspense,{children:void 0===i?(0,o.jsx)("div",{style:{textAlign:"center",margin:"10px",fontSize:"1.5rem"},children:(0,o.jsx)("h4",{children:"Aucun lot en favori"})}):(0,o.jsxs)(h.Z,{sx:{width:"80%",margin:"auto",marginBlock:"2%"},children:[(0,o.jsx)(p.Z,{children:(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(j.Z,{style:{fontWeight:"700"},children:"Titre de la Vente"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"N\xb0 du Lot"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"Nom de Lot"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"Date et heure de la vente"})]})}),(0,o.jsx)(u.Z,{children:i.sort((function(e,t){return E()(t.auction.start)-E()(e.auction.start)})).map((e=>(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(j.Z,{children:e.auction.title}),(0,o.jsx)(j.Z,{align:"right",children:(0,o.jsx)(B.OL,{to:"/lot/".concat(e._id),style:{color:"black",textDecoration:"underline"},children:e.lot.number})}),(0,o.jsx)(j.Z,{align:"right",children:e.lot.title}),(0,o.jsx)(j.Z,{align:"right",children:E()(e.auction.start).format("LLL")})]},e.lot._id)))})]})})]})}var D=l(6843),H=l(7457);function G(e){const{open:t,onClose:l,user:n}=e,[i,a]=(0,s.useState)();return(0,s.useEffect)((()=>{var e;e=n._id,x.Z.get("".concat("http://localhost:5000/","api/user/bids/").concat(e)).then((e=>{"No bid"!==e.data&&JSON.stringify(e.data)!==JSON.stringify(i)&&a(e.data)})).catch((e=>console.log(e)))}),[]),(0,o.jsxs)(T.Z,{onClose:l,open:t,fullWidth:!0,children:[(0,o.jsx)(I.Z,{children:"Ench\xe8res"}),(0,H.xb)(i)?(0,o.jsx)("div",{style:{textAlign:"center",margin:"10px",fontSize:"1.5rem"},children:(0,o.jsx)("h4",{children:"Aucune ench\xe8re"})}):(0,o.jsxs)(h.Z,{sx:{width:"80%",margin:"auto",marginBlock:"2%"},children:[(0,o.jsx)(p.Z,{children:(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(j.Z,{style:{fontWeight:"700"},children:"Titre de la Vente"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"N\xb0 du Lot - Nom de Lot"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"Montant"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"Date et heure"}),(0,o.jsx)(j.Z,{style:{fontWeight:"700"},align:"right",children:"Gagnant"})]})}),(0,o.jsx)(u.Z,{children:i.sort((function(e,t){return E()(t.createdAt)-E()(e.createdAt)})).map((e=>(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(j.Z,{children:e.auctionInfos}),(0,o.jsx)(j.Z,{align:"right",children:(0,o.jsx)(B.OL,{to:"/lot/".concat(e.lotId),style:{color:"black",textDecoration:"underline"},children:e.lotInfos})}),(0,o.jsxs)(j.Z,{align:"right",children:[e.amount," \u20ac"]}),(0,o.jsx)(j.Z,{align:"right",children:E()(e.createdAt).format("LLL")}),(0,o.jsx)(j.Z,{align:"right",children:void 0!==e.win?(0,o.jsx)(D.Z,{}):"-"})]},e._id)))})]})]})}var _=l(3329),z=l(1286),M=l(9218),P=l(9891);function V(e){const{open:t,onClose:l,user:n}=e,a=(0,i.I0)(),[r,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)({name:n.name,surname:n.surname,email:n.email,password:"",job:n.job,phoneNumber:n.phoneNumber,adress:n.adress,adressCity:n.adressCity,adressCountry:n.adressCountry,gender:n.gender,language:n.language,birthDate:n.birthDate,type:n.type,tvaNumber:n.tvaNumber}),u=e=>{h({...d,[e.target.name]:e.target.value})};return(0,o.jsxs)(T.Z,{onClose:l,open:t,fullWidth:!0,children:[(0,o.jsx)(I.Z,{children:"Informations utilisateur"}),(0,o.jsx)("form",{style:{display:"flex",justifyContent:"center",margin:"5%"},noValidate:!0,autoComplete:"off",onSubmit:()=>{x.Z.put("".concat("http://localhost:5000/","api/user/").concat(n._id),d).then((e=>{a("GET_USERS")})).catch((e=>console.log(e))),c(!1),l()},children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(M.Z,{id:"name",name:"name",label:"Nom",type:"text",value:d.name,onChange:u,minLength:1,maxLength:30,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(M.Z,{id:"surname",name:"surname",label:"Pr\xe9nom",value:d.surname,onChange:u,minLength:1,maxLength:30,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(M.Z,{id:"email",name:"email",label:"Email",type:"email",value:d.email,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(M.Z,{id:"password",name:"password",label:"Mot de passe",type:"password",value:d.password,onChange:u,minLength:6,maxLength:1024,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(M.Z,{id:"phoneNumber",name:"phoneNumber",label:"Phone Number",value:d.phoneNumber,onChange:u,maxLength:30,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(M.Z,{id:"adress",name:"adress",label:"Adress",value:d.adress,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(M.Z,{id:"adressCountry",name:"adressCountry",label:"Country",value:d.adressCountry,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r}),(0,o.jsx)("br",{}),(0,o.jsx)(M.Z,{id:"language",name:"language",label:"Langue",value:d.language,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(M.Z,{onChange:u,label:"Civilit\xe9",name:"gender",id:"outlined-select-gender",defaultValue:d.gender,sx:{width:"30vw",margin:"1% 5%"},disabled:!r,select:!0,children:[{label:"Male"},{label:"Female"}].map((e=>(0,o.jsx)(P.Z,{value:e.label,children:e.label},e.label)))}),(0,o.jsx)("br",{}),(0,o.jsx)(M.Z,{id:"birthDate",name:"birthDate",type:"date",label:"Date de naissance",value:d.birthDate.split("T")[0],onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(M.Z,{onChange:u,name:"type",label:"Type",id:"type",defaultValue:d.type,sx:{width:"25vw",margin:"1% 5%"},disabled:!r,select:!0,children:[{label:"Private"},{label:"Company"}].map((e=>(0,o.jsx)(P.Z,{value:e.label,children:e.label},e.label)))}),(0,o.jsx)("br",{}),"Company"===d.type&&(0,o.jsx)(M.Z,{id:"tvaNumber",name:"tvaNumber",label:"N\xb0 TVA",value:d.tvaNumber,onChange:u,sx:{width:"30vw",margin:"1% 5%"},disabled:!r})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"5%"},children:[(0,o.jsx)(S.Z,{variant:"contained",onClick:()=>c(!r),endIcon:(0,o.jsx)(z.Z,{}),children:"Modifier"}),(0,o.jsx)("br",{}),(0,o.jsx)(S.Z,{type:"submit",variant:"contained",endIcon:(0,o.jsx)(_.Z,{}),children:"Enregistrer"})]})]})})]})}var O=l(2162),q=l(3979);function W(e){const{open:t,onClose:l,user:n}=e,[i,a]=(0,s.useState)(),[r,c]=(0,s.useState)();let d,h;function u(){x.Z.get("".concat("http://localhost:5000/","api/auction/currentAuctionLots")).then((e=>{e.data&&JSON.stringify(h)!==JSON.stringify(e.data.lots)&&(c(e.data.lots),h=e.data.lots),e.data&&JSON.stringify(d)!==JSON.stringify(e.data.currentAuction)&&(a(e.data.currentAuction),d=e.data.currentAuction)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{u();const e=setInterval((()=>u()),5e3);return()=>clearInterval(e)}),[]),(0,o.jsxs)(T.Z,{onClose:l,open:t,children:[(0,o.jsx)(I.Z,{children:"Ench\xe8re en cours"}),(0,H.xb)(i)?(0,o.jsx)("div",{style:{textAlign:"center",margin:"10px",fontSize:"1.5rem"},children:(0,o.jsx)("h4",{children:"Aucune ench\xe8re en cours"})}):(0,o.jsx)("div",{children:!(0,H.xb)(r)&&r.map((e=>(0,o.jsx)(U,{lot:e,user:n,fetch:u},e._id)))})]})}function U(e){const{lot:t,user:l,fetch:n}=e,[i,a]=(0,s.useState)(!1),[r]=(0,O.$G)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g.Z,{sx:{"& > *":{borderBottom:"unset"},width:"100%"},children:[(0,o.jsx)(j.Z,{children:(0,o.jsx)(N.Z,{"aria-label":"expand row",size:"small",onClick:()=>a(!i),children:i?(0,o.jsx)(F.Z,{}):(0,o.jsx)(L.Z,{})})}),(0,o.jsxs)(j.Z,{component:"th",scope:"row",children:[(0,o.jsxs)("strong",{children:[t.number," - ",t.title]})," (",r("Lot."+t.type),")"]}),(0,o.jsxs)(j.Z,{align:"right",children:[t.bids.length," ench\xe9rissements"]}),(0,o.jsxs)(j.Z,{align:"right",children:["Fin de l'ennch\xe8re : ",E()(t.end).format("lll")]}),(0,o.jsxs)(j.Z,{align:"right",children:[(0,H.xb)(t.lastBid)?t.price:t.lastBid.amount," \u20ac"]})]}),(0,o.jsx)(k.Z,{in:i,timeout:"auto",unmountOnExit:!0,className:"BidPanel-Cell",children:(0,o.jsx)(q.c,{lot:t,user:l,fetchLot:n})})]})}function J(e){const t=e.user,[l,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[r,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1),[m,A]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!1),[B,D]=(0,s.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,o.jsx)(j.Z,{children:(0,o.jsx)(N.Z,{"aria-label":"expand row",size:"small",onClick:()=>n(!l),children:l?(0,o.jsx)(F.Z,{}):(0,o.jsx)(L.Z,{})})}),(0,o.jsx)(j.Z,{component:"th",scope:"row",children:t.isAdmin&&(0,o.jsx)(b.Z,{})}),(0,o.jsx)(j.Z,{component:"th",scope:"row",children:t.name}),(0,o.jsx)(j.Z,{align:"right",children:t.surname}),(0,o.jsx)(j.Z,{align:"right",children:t.email}),(0,o.jsx)(j.Z,{align:"right",children:t.phoneNumber}),(0,o.jsx)(j.Z,{align:"right",children:t.blocked?(0,o.jsx)(y.Z,{color:"warning"}):" "}),(0,o.jsx)(j.Z,{align:"right",children:t.verified?(0,o.jsx)(f.Z,{color:"success"}):(0,o.jsx)(S.Z,{variant:"contained",size:"small",onClick:async function(){await x.Z.put("".concat("http://localhost:5000/","api/user/verify/").concat(t._id)).then((t=>{e.fetchUsers(),alert("Utilisateur v\xe9rifi\xe9")})).catch((e=>alert("Erreur : "+e.response.data)))},color:"error",children:"v\xe9rifier"})})]}),(0,o.jsx)(g.Z,{children:(0,o.jsx)(j.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:8,children:(0,o.jsx)(k.Z,{in:l,timeout:"auto",unmountOnExit:!0,children:(0,o.jsxs)(Z.Z,{sx:{margin:1},children:[(0,o.jsxs)(w.Z,{variant:"h6",gutterBottom:!0,component:"div",children:[t.name," ",t.surname]}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col",style:{width:"50%"},children:[(0,o.jsxs)(w.Z,{style:{color:"black"},children:["Adresse : ",t.adress+" "+t.adressCity]}),(0,o.jsxs)(w.Z,{style:{color:"black"},children:["Date de naissance : ",E()(t.birthDate).format("L")]}),(0,o.jsxs)(w.Z,{style:{color:"black"},children:["Genre : ",t.gender]}),(0,o.jsxs)(w.Z,{style:{color:"black"},children:["Type : ",t.type]}),t.isAdmin?(0,o.jsx)(w.Z,{style:{color:"black"},children:"Admin : oui"}):(0,o.jsxs)(w.Z,{style:{color:"black"},children:["Bloqu\xe9 : ",t.blocked?"Oui":"Non"]})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{style:{display:"flex",gap:"5%"},children:[(0,o.jsx)(S.Z,{variant:"contained",size:"small",onClick:()=>h(!0),children:"\xc9diter"}),(0,o.jsx)(S.Z,{variant:"contained",size:"small",onClick:()=>A(!0),style:{whiteSpace:"normal"},children:"Renvoyer mail de v\xe9rification"}),(0,o.jsx)(N.Z,{"aria-label":"delete",disabled:t.isAdmin,onClick:()=>D(!0),children:(0,o.jsx)(v.Z,{})})]})})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)(S.Z,{variant:"contained",size:"small",onClick:()=>p(!0),children:"Ench\xe9rir \xe0 sa place"}),(0,o.jsx)(S.Z,{variant:"contained",size:"small",onClick:()=>a(!0),children:"Historique des lots suivis"}),(0,o.jsx)(S.Z,{variant:"contained",size:"small",onClick:()=>c(!0),children:"Historique des ench\xe8res"}),(0,o.jsx)(S.Z,{variant:"contained",size:"small",disabled:t.isAdmin,onClick:()=>T(!0),children:t.blocked?"D\xe9bloquer":"Bloquer"})]}),(0,o.jsx)("br",{})]})})})}),(0,o.jsx)(R,{open:i,onClose:()=>a(!1),user:t}),(0,o.jsx)(G,{open:r,onClose:()=>c(!1),user:t}),(0,o.jsx)(V,{open:d,onClose:()=>h(!1),user:t}),(0,o.jsx)(W,{open:u,onClose:()=>p(!1),user:t}),(0,o.jsx)(C.Z,{message:"envoyer le mail de v\xe9rification \xe0 nouveau",open:m,yesFunction:async function(){A(!1),await x.Z.post("".concat("http://localhost:5000/","api/verif/email-verification/").concat(t.email),{userId:t._id,user:t}).then((t=>{e.fetchUsers(),alert("Mail de v\xe9rification envoy\xe9")})).catch((e=>alert("Erreur : "+e.response.data)))},onClose:()=>A(!1)}),(0,o.jsx)(C.Z,{message:"supprimer cet utilisateur de mani\xe8re d\xe9finitive",open:B,yesFunction:async function(){D(!1),x.Z.delete("".concat("http://localhost:5000/","api/user/").concat(t._id)).then((l=>{e.fetchUsers(),alert("Utilisateur ".concat(t.email," supprim\xe9"))})).catch((e=>console.log(e)))},onClose:()=>D(!1)}),(0,o.jsx)(C.Z,{message:t.blocked?"d\xe9bloquer cet utilisateur":"bloquer cet utilisateur",open:I,yesFunction:async function(){T(!1),await x.Z.put("".concat("http://localhost:5000/","api/user/block/").concat(t._id),{blocked:!t.blocked}).then((l=>{e.fetchUsers(),alert("Utilisateur ".concat(t.blocked?"d\xe9bloqu\xe9":"bloqu\xe9"))})).catch((e=>alert("Erreur : "+e.response.data)))},onClose:()=>T(!1)})]})}const Y=function(){const[e,t]=(0,s.useState)([]);async function l(){await x.Z.get("".concat("http://localhost:5000/","api/user/")).then((l=>{JSON.stringify(e)!==JSON.stringify(l.data)&&t(l.data)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{l()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(m.Z,{children:(0,o.jsxs)(h.Z,{sx:{minWidth:650},size:"small","aria-label":"user table",children:[(0,o.jsx)(p.Z,{children:(0,o.jsxs)(g.Z,{children:[(0,o.jsx)(j.Z,{}),(0,o.jsx)(j.Z,{children:(0,o.jsx)(b.Z,{})}),(0,o.jsx)(j.Z,{children:"Nom"}),(0,o.jsx)(j.Z,{align:"right",children:"Pr\xe9nom"}),(0,o.jsx)(j.Z,{align:"right",children:"Email"}),(0,o.jsx)(j.Z,{align:"right",children:"T\xe9l\xe9phone"}),(0,o.jsx)(j.Z,{align:"right",children:"Bloqu\xe9"}),(0,o.jsx)(j.Z,{align:"right",children:"V\xe9rifi\xe9"})]})}),(0,o.jsx)(u.Z,{children:!(0,H.xb)(e)&&e.map((e=>(0,o.jsx)(J,{user:e,fetchUsers:l},e.email)))})]})}),(0,o.jsx)("br",{})]})},K=()=>(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Administration des utilisateurs."})}),(0,o.jsx)("br",{}),(0,o.jsx)(Y,{})]});var Q=l(6192),X=l(9157),$=l(6770),ee=l.n($),te=(l(6009),ee().Quill.import("formats/font"));te.whitelist=["arapey","arial","georgia","helvetica","times-new-roman"],ee().Quill.register(te,!0);function le(e){const{onClose:t,open:l,fetchPosts:n}=e,[i,a]=(0,s.useState)({titleFR:"",titleEN:"",video:"",picture:""}),[r,c]=(0,s.useState)("");(0,s.useEffect)((()=>{a({titleFR:"",titleEN:"",video:"",picture:""}),c("")}),[l]);const d=e=>{const{name:t,value:l}=e.target;a({...i,[t]:l})},h={toolbar:[[{header:[1,2,!1]}],[{font:te.whitelist}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}]]},u=["header","font","bold","italic","underline","strike","align"],[j,p]=(0,s.useState)();const[g,m]=(0,s.useState)();return(0,o.jsxs)(T.Z,{onClose:t,open:l,className:"create-post-dialog",children:[(0,o.jsxs)(I.Z,{children:["Cr\xe9er un post",(0,o.jsx)(S.Z,{onClick:t,sx:{position:"absolute",right:10,top:10},children:"\u2715"})]}),(0,o.jsx)(X.Z,{children:(0,o.jsxs)("form",{className:"form-container",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("img",{src:"./img/icons/french_flag.svg",alt:"french flag"}),(0,o.jsx)("label",{children:"Titre :"}),(0,o.jsx)("input",{type:"text",name:"titleFR",value:i.titleFR,onChange:d,required:!0,minLength:3,maxLength:30})]}),(0,o.jsx)("div",{className:"preview-editor",children:(0,o.jsx)(ee(),{value:j,modules:h,formats:u,placeholder:"Message en fran\xe7ais...",onChange:function(e){p(e)}})})]}),(0,o.jsx)("br",{}),(0,o.jsx)("hr",{}),(0,o.jsx)("br",{}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("img",{src:"./img/icons/UK_flag.svg",alt:"UK flag"}),(0,o.jsx)("label",{children:"Titre en anglais :"}),(0,o.jsx)("input",{type:"text",name:"titleEN",value:i.titleEN,onChange:d,required:!0,minLength:3,maxLength:30})]}),(0,o.jsx)("div",{className:"preview-editor",children:(0,o.jsx)(ee(),{value:g,modules:h,formats:u,placeholder:"Message en anglais...",onChange:function(e){m(e)}})})]}),(0,o.jsxs)("div",{children:[(0,H.xb)(i.postPicture)&&(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("label",{children:"Lien d'une vid\xe9o (notez bien que c'est soit une video soit une image) :"}),(0,o.jsx)("input",{type:"text",name:"video",value:i.video,onChange:function(e){const t=e.target.value.replace("watch?v=","embed/");a({...i,video:t.split("&")[0]})}})]}),(0,H.xb)(i.video)&&(0,o.jsxs)("div",{className:"field",children:[(0,o.jsx)("label",{children:"Charger une image :"}),(0,o.jsx)("input",{type:"file",id:"file-upload",name:"file",accept:".jpg, .jpeg, .png",onChange:e=>(e=>{a({...i,video:""}),c(e.target.files[0])})(e)})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:e=>{e.preventDefault();const l=new FormData;l.append("titleFR",i.titleFR),l.append("titleEN",i.titleEN),l.append("messageFR",j),l.append("messageEN",g),l.append("picture",r),l.append("video",i.video),x.Z.post("".concat("http://localhost:5000/","api/post/"),l).then((e=>{n(),t()})).catch((e=>{t(),alert("LIMIT_FILE_SIZE"===e.response.data?"Erreur : le fichier est trop VOLUMINEUX (8Mo max)":e.response.data)}))},children:"Cr\xe9er le post"})]})})]})}const se=()=>{const[e,t]=(0,s.useState)([]),[l,n]=(0,s.useState)(!1);function i(){x.Z.get("".concat("http://localhost:5000/","api/post/")).then((e=>t(e.data))).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{i()}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Administration des M\xe9dias."})}),(0,o.jsx)("br",{}),(0,o.jsx)(S.Z,{variant:"contained",onClick:()=>n(!0),style:{margin:"1%"},children:" Cr\xe9er un post"}),!(0,H.xb)(e)&&e.slice().map((e=>(0,o.jsx)(Q.Z,{post:e,inAdmin:!0,fetchPosts:i},e._id))),(0,o.jsx)(le,{open:l,onClose:()=>n(!1),fetchPosts:i}),(0,o.jsx)("br",{})]})};function ne(e){const t=e.bid,[l,n]=(0,s.useState)();return(0,s.useEffect)((()=>{x.Z.get("".concat("http://localhost:5000/","api/user/").concat(t.bidderId)).then((e=>n(e.data))).catch((e=>console.log(e)))}),[]),(0,o.jsx)("div",{style:{width:"100%"},children:void 0!==l&&(0,o.jsxs)(g.Z,{sx:{width:"100%",display:"flex"},children:[(0,o.jsxs)(j.Z,{sx:{flex:"2"},align:"left",children:[(0,o.jsxs)("strong",{children:[l.name," ",l.surname]})," - (",l.type,") "]}),(0,o.jsxs)(j.Z,{sx:{flex:"2"},align:"left",children:[" ",l.email]}),(0,o.jsxs)(j.Z,{sx:{flex:"1"},align:"left",children:[" ",l.phoneNumber]}),(0,o.jsx)(j.Z,{sx:{flex:"1"},align:"right",children:(0,o.jsxs)("strong",{children:[t.amount," \u20ac"]})}),(0,o.jsxs)(j.Z,{sx:{flex:"1"},align:"right",children:[E()(t.createdAt).format("LLL")," "]})]})})}var ie=l(9673),ae=l(3721),re=l(5818),ce=l(1131);function oe(){const[e,t]=(0,s.useState)();let l;function n(){x.Z.get("".concat("http://localhost:5000/","api/auction/")).then((e=>{e.data&&JSON.stringify(l)!==JSON.stringify(e.data)&&(t(e.data),l=e.data)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{n();const e=setInterval((()=>n()),5e3);return()=>clearInterval(e)}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Historique des ench\xe9rissements."})}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{rowGap:"10px",display:"flex",flexDirection:"column",width:"70%"},children:!(0,H.xb)(e)&&(0,o.jsx)(de,{auctions:e})}),(0,o.jsx)("br",{})]})}function de(e){let{auctions:t}=e;const[l,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),[r,c]=(0,s.useState)(),d=e=>(t,l)=>{var s;n(!!l&&e),s=e,x.Z.get("".concat("http://localhost:5000/","api/auction/lots/").concat(s)).then((e=>c(e.data))).catch((e=>console.log(e)))};return(0,o.jsx)("div",{children:t.slice().reverse().map((e=>(0,o.jsxs)(ie.Z,{expanded:l===e._id,onChange:d(e._id),children:[(0,o.jsxs)(re.Z,{expandIcon:(0,o.jsx)(ce.Z,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex",gap:"10px"},children:[(0,o.jsx)(w.Z,{sx:{color:"black",flex:"2"},children:e.title}),(0,o.jsxs)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:["Date : ",E()(e.start).format("LLL")]}),(0,o.jsxs)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:[e.catalogue.length," lots"]})]}),(0,o.jsx)(ae.Z,{children:!(0,H.xb)(r)&&r.slice().map((e=>{return(0,o.jsxs)(ie.Z,{expanded:i===e._id,onChange:(t=e._id,(e,l)=>{a(!!l&&t)}),children:[(0,o.jsxs)(re.Z,{expandIcon:(0,o.jsx)(ce.Z,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex"},children:[(0,o.jsxs)(w.Z,{sx:{color:"black",flex:"3"},children:["Lot ",e.number," - ",e.title]}),(0,o.jsx)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:e.type}),(0,o.jsxs)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:[e.bids.length," ench\xe9rissements"]})]}),(0,o.jsx)(ae.Z,{children:e.bids.slice().reverse().map((e=>(0,o.jsx)(ne,{bid:e})))})]});var t}))})]},e._id)))})}const xe=()=>{const[e,t]=(0,s.useState)();return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"\xc9dition des documents l\xe9gaux."})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h3",{children:"Condition g\xe9n\xe9rale d'utilisation :"}),(0,o.jsx)("label",{htmlFor:"cgu",children:"Charger un document (pdf) :"}),(0,o.jsx)("input",{type:"file",id:"cgu",name:"cgu",accept:".pdf",style:{maxWidth:"30%",color:"black"},onChange:e=>t(e.target.files[0])}),(0,o.jsx)("br",{}),(0,o.jsx)(S.Z,{variant:"contained",onClick:async()=>{if(e){const t=new FormData;t.append("file",e),await x.Z.post("".concat("http://localhost:5000/","api/utils/upload/cgu"),t).then((e=>{console.log("Success :"+e.data)})).catch((e=>console.log(e)))}else console.log("No file")},children:"Enregistrer"}),(0,o.jsx)("br",{}),(0,o.jsx)("hr",{style:{width:"40%",textAlign:"center",height:"3px",border:"0",backgroundColor:"white",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0))"}}),(0,o.jsx)("br",{}),(0,o.jsx)("h3",{children:"Politique de confidentialit\xe9 :"}),(0,o.jsx)("label",{htmlFor:"politiqueConf",children:"Charger un document (pdf) :"}),(0,o.jsx)("input",{type:"file",id:"politiqueConf",name:"politiqueConf",accept:".pdf",style:{maxWidth:"30%",color:"black"},onChange:e=>t(e.target.files[0])}),(0,o.jsx)("br",{}),(0,o.jsx)(S.Z,{variant:"contained",onClick:async()=>{if(e){const t=new FormData;t.append("file",e),await x.Z.post("".concat("http://localhost:5000/","api/utils/upload/politiqueconf"),t).then((e=>{console.log("Success :"+e.data)})).catch((e=>console.log(e)))}else console.log("No file")},children:"Enregistrer"}),(0,o.jsx)("br",{}),(0,o.jsx)("hr",{style:{width:"40%",textAlign:"center",height:"3px",border:"0",backgroundColor:"white",background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0))"}}),(0,o.jsx)("br",{}),(0,o.jsx)("h3",{children:"Copyright :"}),(0,o.jsx)("label",{htmlFor:"copyright",children:"Charger un document (pdf) :"}),(0,o.jsx)("input",{type:"file",id:"copyright",name:"copyright",accept:".pdf",style:{maxWidth:"30%",color:"black"},onChange:e=>t(e.target.files[0])}),(0,o.jsx)("br",{}),(0,o.jsx)(S.Z,{variant:"contained",onClick:async()=>{if(e){const t=new FormData;t.append("file",e),await x.Z.post("".concat("http://localhost:5000/","api/utils/upload/copyright"),t).then((e=>{console.log("Success :"+e.data)})).catch((e=>console.log(e)))}else console.log("No file")},children:"Enregistrer"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]})};var he=l(3123);function ue(){const[e,t]=(0,s.useState)(),[l,n]=(0,s.useState)(),[i,a]=(0,s.useState)(!0),[r,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1);let u,j;function p(){x.Z.get("".concat("http://localhost:5000/","api/auction/currentAuctionLots")).then((e=>{void 0!==e&&JSON.stringify(j)!==JSON.stringify(e.data.lots)&&(n(e.data.lots),j=e.data.lots),void 0!==e&&JSON.stringify(u)!==JSON.stringify(e.data.currentAuction)&&(t(e.data.currentAuction),u=e.data.currentAuction),void 0!==e&&void 0!==e.data.currentAuction&&E()(e.data.currentAuction.end).add(5*(e.data.currentAuction.catalogue.length-1),"m").isBefore(E()())?a(!1):a(!0)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{p();const e=setInterval((()=>p()),3e3);return()=>clearInterval(e)}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"},children:(0,o.jsx)("h1",{children:"Ench\xe8re en cours"})}),(0,o.jsx)("br",{}),(0,H.xb)(e)?(0,o.jsx)("h2",{style:{margin:"auto"},children:"Pas d'ench\xe8re en cours"}):(0,o.jsxs)("div",{style:{width:"90%"},children:[(0,o.jsx)("div",{className:"col",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{border:"3px solid",borderRadius:"20px",padding:"5%",color:"rgb(239, 193, 109)"},children:[(0,o.jsxs)("h2",{style:{fontSize:"3rem",display:"flex",gap:"20px"},children:[" Titre : ",(0,o.jsx)("p",{style:{fontSize:"2.8rem",color:"white"},children:e.title})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("h2",{style:{fontSize:"2.5rem",display:"flex",gap:"20px"},children:[" Sous-titre : ",(0,o.jsx)("p",{style:{fontSize:"2.2rem",color:"white"},children:e.description})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("h2",{style:{fontSize:"1.8rem",display:"flex",gap:"20px"},children:[" D\xe9but : ",(0,o.jsx)("p",{style:{fontSize:"1.6rem",color:"white"},children:E()(e.start).format("LLL")})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("h2",{style:{fontSize:"1.8rem",display:"flex",gap:"20px"},children:[" Fin : ",(0,o.jsxs)("p",{style:{fontSize:"1.6rem",color:"white"},children:[E()(e.end).format("LLL")," (dernier lot : ",E()(e.end).add(5*(e.catalogue.length-1),"m").format("LLL"),")"]})]}),(0,o.jsx)("br",{}),(0,o.jsx)(S.Z,{variant:"contained",onClick:()=>{c(!0)},children:"\xc9diter"}),(0,o.jsx)(S.Z,{sx:{marginInline:"5%"},variant:"contained",onClick:()=>h(!0),disabled:i,children:"Cloturer la vente"})]}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{children:!(0,H.xb)(l)&&l.slice().sort(((e,t)=>e.number-t.number)).map((e=>(0,o.jsxs)(ie.Z,{expanded:!0,children:[(0,o.jsxs)(re.Z,{"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex"},children:[(0,o.jsxs)(w.Z,{sx:{color:"black",flex:"1"},children:[" ",(0,o.jsxs)("strong",{children:[e.number," - ",e.title]})," "]}),(0,o.jsx)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:e.type}),(0,o.jsxs)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:[e.bids.length," ench\xe9rissements"]})]}),(0,o.jsx)(ae.Z,{children:!(0,H.xb)(e.bids)&&e.bids.slice().reverse().map(((e,t)=>(0,o.jsx)(pe,{bid:e,isLast:0===t},e._id)))})]})))})]})}),(0,o.jsx)(je,{open:r,onClose:()=>{r&&c(!1)},auction:e}),(0,o.jsx)(C.Z,{message:"cloturer la vente",open:d,onClose:()=>h(!1),yesFunction:function(){h(!1),(0,H.xb)(e)||x.Z.patch("".concat("http://localhost:5000/","api/auction/close/").concat(e._id)).then((()=>alert("Ench\xe8re ferm\xe9e avec succ\xe8s !"))).catch((e=>alert("Erreur : "+e)))}})]}),(0,o.jsx)("br",{})]})}function je(e){const{open:t,onClose:l,auction:s}=e;return(0,o.jsxs)(T.Z,{onClose:l,open:t,PaperProps:{sx:{padding:"2%"}},children:[(0,o.jsx)(I.Z,{children:"\xc9diter la vente"}),(0,o.jsx)(he.Z,{onClose:l,auction:s})]})}function pe(e){const{bid:t,isLast:l}=e,[n,i]=(0,s.useState)(),[a,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{x.Z.get("".concat("http://localhost:5000/","api/user/").concat(t.bidderId)).then((e=>{const t=e.data;i(t)})).catch((e=>console.log(e)))}),[]),(0,o.jsxs)("div",{style:{width:"100%"},children:[void 0!==n&&(0,o.jsxs)(g.Z,{sx:{width:"100%",display:"flex"},children:[(0,o.jsxs)(j.Z,{sx:{flex:"6",padding:"5px 2px"},align:"left",children:[(0,o.jsxs)("strong",{children:[n.name," ",n.surname]})," - (",n.type,") "]}),(0,o.jsxs)(j.Z,{sx:{flex:"6",padding:"5px 2px"},align:"left",children:[" ",n.email]}),(0,o.jsxs)(j.Z,{sx:{flex:"4",padding:"5px 2px"},align:"left",children:[" ",n.phoneNumber]}),(0,o.jsx)(j.Z,{sx:{flex:"4",padding:"5px 2px"},align:"right",children:(0,o.jsxs)("strong",{children:[t.amount," \u20ac"]})}),(0,o.jsxs)(j.Z,{sx:{flex:"4",padding:"5px 2px"},align:"right",children:[E()(t.createdAt).format("LLL")," "]}),(0,o.jsx)(j.Z,{sx:{flex:"1",padding:"5px 2px"},align:"right",children:l&&(0,o.jsx)(v.Z,{className:"delete",onClick:()=>r(!0)})})]}),a&&(0,o.jsx)(C.Z,{message:"supprimer cette ench\xe8re",open:a,onClose:()=>r(!1),yesFunction:async function(){r(!1),await x.Z.delete("".concat("http://localhost:5000/","api/bid/").concat(t._id),t).then((e=>alert("Ench\xe8re supprim\xe9e !"))).catch((e=>alert("Erreur : "+e)))}})]})}var ge=l(1978);const me=JSON.parse('{"N":"FR76 1660 6000 0184 8877 3118 638","d":"AGRIFRPP866"}');ge.Zx.register({family:"Roboto",src:"https://fonts.googleapis.com/css?family=Roboto"});const be=ge.mM.create({container:{display:"flex",flexDirection:"row",paddingBottom:20},h1:{fontFamily:"Helvetica-Bold",marginBottom:5},h2:{fontSize:20,fontFamily:"Helvetica-Bold",display:"flex",alignSelf:"flex-end",marginBottom:"20px"},left:{flex:1,lineHeight:"1.6px",fontSize:10},right:{display:"flex",alignSelf:"flex-end",lineHeight:"1.6px",fontSize:10},rightContainer:{marginTop:"50px"},body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35,fontFamily:"Helvetica"},title:{fontSize:10,textDecoration:"underline",marginBottom:"5px"},text:{fontSize:10,lineHeight:"1.3px",textAlign:"justify"},bold:{fontFamily:"Helvetica-Bold"},pageNumber:{position:"absolute",fontSize:10,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},table:{display:"table",width:"100%",marginTop:15,marginBottom:10},tableRow:{flexDirection:"row"},tableCell:{padding:4,borderWidth:1,borderColor:"#000",fontSize:10,textAlign:"center"},tableHeader:{backgroundColor:"#f2f2f2",fontFamily:"Helvetica-Bold"},tableTotal:{marginTop:10},info:{marginTop:"25px"}});function fe(e){const t=e.sale,l=e.user,n=e.auction,i=t.lot,a=t.bid,r=1+i.tva/100,c=n.commission/100,d=a.amount,h=d*c,u=d*r,j=1.2*h,p=d*(i.tva/100)+.2*h,g=u+j,[m,b]=(0,s.useState)();function f(){return(0,o.jsxs)(ge.G7,{style:be.container,children:[(0,o.jsxs)(ge.G7,{style:be.left,children:[(0,o.jsx)(ge.xv,{style:be.h1,children:"Facture \xe9mise par la soci\xe9t\xe9 :"}),(0,o.jsx)(ge.xv,{children:"ALPHA MARES SARL"}),(0,o.jsx)(ge.xv,{children:"La Poupri\xe8re 61250 SEMALLE - FRANCE"}),(0,o.jsx)(ge.xv,{children:"contact@alphamares.com"}),(0,o.jsx)(ge.xv,{children:"+33 6 33 34 66 54 "}),(0,o.jsx)(ge.xv,{children:"SIRET : 95076126200019"}),(0,o.jsx)(ge.xv,{children:"N\xb0 de TVA : FR59950761262"})]}),(0,o.jsxs)(ge.G7,{style:be.right,children:[(0,o.jsx)(ge.xv,{style:be.h2,children:"Facture"}),(0,o.jsxs)(ge.G7,{style:be.rightContainer,children:[(0,o.jsx)(ge.xv,{style:be.right,children:"Company"===l.type?l.companyName:l.name+" "+l.surname}),(0,o.jsx)(ge.xv,{style:be.right,children:l.adress}),(0,o.jsx)(ge.xv,{style:be.right,children:l.adressCity}),(0,o.jsx)(ge.xv,{style:be.right,children:l.phoneNumber}),(0,o.jsx)(ge.xv,{style:be.right,children:l.email}),(0,o.jsx)(ge.xv,{style:be.right,children:"Private"!==l.type?"N\xb0 de TVA : "+l.tvaNumber:""})]})]})]})}return(0,s.useEffect)((()=>{!async function(){x.Z.get("".concat("http://localhost:5000/","api/sales/num-sales/").concat(t._id)).then((e=>{const t=e.data;t!==m&&b(t)})).catch((e=>console.log(e)))}()}),[e,m]),(0,o.jsx)(ge.BB,{children:(0,o.jsxs)(ge.T3,{size:"A4",style:be.body,children:[(0,o.jsx)(f,{}),(0,o.jsx)("br",{}),(0,o.jsx)(ge.xv,{style:be.text,children:(0,o.jsxs)(o.Fragment,{children:["Fait \xe0 ALEN\xc7ON, le ",E()().format("L")]})}),(0,o.jsx)("br",{}),(0,o.jsxs)(ge.xv,{style:be.text,children:["N\xb0 de Facture : ",E()(t.updatedAt).format("L").replace(/\//g,"")+m]}),(0,o.jsxs)(ge.xv,{style:be.text,children:["Nom de la vente : ",n.title]}),(0,o.jsxs)(ge.G7,{style:be.table,children:[(0,o.jsxs)(ge.G7,{style:[be.tableRow,be.tableHeader],children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"N\xb0 de Lot"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"Nom du Lot"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"Montant (en \u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"TVA (en %)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"Prix TTC (en \u20ac)"})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:i.number}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"".concat(Ce(i.type)," ").concat(i.pedigree.gen1.father," x ").concat(i.pedigree.gen1.mother)}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:d.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:i.tva}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:u.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"-"}),(0,o.jsxs)(ge.xv,{style:[be.tableCell,{flex:3}],children:["Frais de vente (",n.commission," %)"]}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:h.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"20"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:j.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total HT (en \u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total frais de TVA (en \u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:p.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total TTC (en \u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:g.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]}),(0,o.jsxs)(ge.G7,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,o.jsxs)(ge.G7,{style:[be.table,{width:"40%"}],children:[(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2}],children:"Moyen de paiement "}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"Virement bancaire"})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2}],children:"A payer"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"A la r\xe9ception de la facture"})]})]}),(0,o.jsxs)(ge.G7,{style:[be.table,{width:"50%"}],children:[(0,o.jsx)(ge.G7,{style:[be.tableRow,be.tableHeader],children:(0,o.jsx)(ge.xv,{style:[be.tableCell,{width:"100%",textAlign:"center"}],children:"R\xe9capitulatif TVA"})}),(0,o.jsxs)(ge.G7,{style:[be.tableRow,be.tableHeader],children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"Taux"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"Base HT"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"TVA"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"TTC"})]}),(0,o.jsxs)(ge.G7,{style:[be.tableRow],children:[(0,o.jsxs)(ge.xv,{style:[be.tableCell,{flex:1}],children:[(p/(d+h)*100).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")," %"]}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:p.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:g.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]})]}),(0,o.jsxs)(ge.G7,{style:be.info,children:[(0,o.jsx)(ge.xv,{style:[be.title,be.bold],children:"Coordonn\xe9es bancaires : "}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"Titulaire du compte :"})," ALPHA MARES"]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"IBAN : "}),me.N]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"BIC : "})," ",me.d]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"Domiciliation :"})," Cr\xe9dit Agricole"]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"Adresse :"})," 15 Cours Clemenceau 61000 Alen\xe7on"]})]}),(0,o.jsxs)(ge.G7,{style:{marginTop:"10px"},children:[(0,o.jsx)(ge.xv,{style:[be.title,be.bold],children:"Rappel des r\xe8gles de paiement : "}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 Vous devez faire ce virement en euros."}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 Le paiement doit \xeatre r\xe9alis\xe9 en une seule fois."}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 Vous \xeates redevable de l'ensemble des frais, taxes, droits et pr\xe9l\xe8vements dus au titre de ce paiement."}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 En cas d'absence de paiement int\xe9gral dans le d\xe9lai de 7 jours \xe0 compter de la cl\xf4ture de la vente et de la r\xe9ception de la facture par l'acheteur, ALPHA MARES est libre d'annuler la vente ou d'appliquer des int\xe9r\xeats de retard au taux en vigueur."})]}),(0,o.jsx)(ge.xv,{style:be.pageNumber,render:e=>{let{pageNumber:t,totalPages:l}=e;return"".concat(t," / ").concat(l)}})]})})}function ye(e){const t=e.sale,l=e.user,n=e.auction,i=t.lot,a=t.bid,r=1+i.tva/100,c=n.commission/100,d=a.amount,h=d*c,u=d*r,j=1.2*h,p=d*(i.tva/100)+.2*h,g=u+j,[m,b]=(0,s.useState)();function f(){return(0,o.jsxs)(ge.G7,{style:be.container,children:[(0,o.jsxs)(ge.G7,{style:be.left,children:[(0,o.jsx)(ge.xv,{style:be.h1,children:"Invoice issued by the compagny: "}),(0,o.jsx)(ge.xv,{children:"ALPHA MARES SARL"}),(0,o.jsx)(ge.xv,{children:"La Poupri\xe8re 61250 SEMALLE - FRANCE"}),(0,o.jsx)(ge.xv,{children:"contact@alphamares.com"}),(0,o.jsx)(ge.xv,{children:"+33 6 33 34 66 54 "}),(0,o.jsx)(ge.xv,{children:"SIRET : 95076126200019"}),(0,o.jsx)(ge.xv,{children:"VAT number : FR59950761262"})]}),(0,o.jsxs)(ge.G7,{style:be.right,children:[(0,o.jsx)(ge.xv,{style:be.h2,children:"Invoice"}),(0,o.jsxs)(ge.G7,{style:be.rightContainer,children:[(0,o.jsxs)(ge.xv,{style:be.right,children:[l.name," ",l.surname]}),(0,o.jsx)(ge.xv,{style:be.right,children:l.adress}),(0,o.jsx)(ge.xv,{style:be.right,children:l.adressCity}),(0,o.jsx)(ge.xv,{style:be.right,children:l.phoneNumber}),(0,o.jsx)(ge.xv,{style:be.right,children:l.email}),(0,o.jsx)(ge.xv,{style:be.right,children:void 0!==l.tvaNumber?"VAT number : "+l.tvaNumber:""})]})]})]})}return(0,s.useEffect)((()=>{!async function(){x.Z.get("".concat("http://localhost:5000/","api/sales/num-sales/").concat(t._id)).then((e=>{const t=e.data;t!==m&&b(t)})).catch((e=>console.log(e)))}()}),[e,m]),(0,o.jsx)(ge.BB,{children:(0,o.jsxs)(ge.T3,{size:"A4",style:be.body,children:[(0,o.jsx)(f,{}),(0,o.jsx)("br",{}),(0,o.jsx)(ge.xv,{style:be.text,children:(0,o.jsxs)(o.Fragment,{children:["ALEN\xc7ON, ",E()().format("L")]})}),(0,o.jsx)("br",{}),(0,o.jsxs)(ge.xv,{style:be.text,children:["Invoice number : ",E()(t.updatedAt).format("L").replace(/\//g,"")+m]}),(0,o.jsxs)(ge.xv,{style:be.text,children:["Name of the event : ",n.titleEN]}),(0,o.jsxs)(ge.G7,{style:be.table,children:[(0,o.jsxs)(ge.G7,{style:[be.tableRow,be.tableHeader],children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"Lot No."}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"Name"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"Amount ( \u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"VAT (%)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"Including VAT (en \u20ac)"})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:i.number}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"".concat(ve(i.type)," ").concat(i.pedigree.gen1.father," x ").concat(i.pedigree.gen1.mother)}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:d.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:i.tva}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:u.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"-"}),(0,o.jsxs)(ge.xv,{style:[be.tableCell,{flex:3}],children:["Selling fees (",n.commission," %)"]}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:h.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:"20"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:2}],children:j.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]},i._id),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total amount excluding VAT (\u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"VAT amount (\u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:p.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2,paddingHorizontal:2.4}],children:"Total amount including VAT (\u20ac)"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:g.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]}),(0,o.jsxs)(ge.G7,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,o.jsxs)(ge.G7,{style:[be.table,{width:"40%"}],children:[(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2}],children:"Method of payement "}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"Bank transfer"})]}),(0,o.jsxs)(ge.G7,{style:be.tableRow,children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,be.tableHeader,{flex:2}],children:"To be paid"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:3}],children:"Upon receipt"})]})]}),(0,o.jsxs)(ge.G7,{style:[be.table,{width:"50%"}],children:[(0,o.jsx)(ge.G7,{style:[be.tableRow,be.tableHeader],children:(0,o.jsx)(ge.xv,{style:[be.tableCell,{width:"100%",textAlign:"center"}],children:"VAT summary"})}),(0,o.jsxs)(ge.G7,{style:[be.tableRow,be.tableHeader],children:[(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"Rate"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"Excl. VAT"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"VAT"}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:"Incl. VAT"})]}),(0,o.jsxs)(ge.G7,{style:[be.tableRow],children:[(0,o.jsxs)(ge.xv,{style:[be.tableCell,{flex:1}],children:[(p/(d+h)*100).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")," %"]}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:(d+h).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:p.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")}),(0,o.jsx)(ge.xv,{style:[be.tableCell,{flex:1}],children:g.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g," ")})]})]})]}),(0,o.jsxs)(ge.G7,{children:[(0,o.jsx)(ge.xv,{style:[be.title,be.bold],children:"Bank details : "}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"Account holder :"})," ALPHA MARES"]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"IBAN : "}),me.N]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"BIC : "}),me.d]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"Bank agency :"})," Cr\xe9dit Agricole"]}),(0,o.jsxs)(ge.xv,{style:be.text,children:[(0,o.jsx)(ge.xv,{style:be.bold,children:"Adress :"})," 15 Cours Clemenceau 61000 Alen\xe7on"]})]}),(0,o.jsxs)(ge.G7,{style:{marginTop:"10px"},children:[(0,o.jsx)(ge.xv,{style:[be.title,be.bold],children:"Payement rules :"}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 You must make this transfer in euros."}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 The payment must be made in a single transfer."}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 You are liable for all charges, taxes, duties and levies due in respect of this payment."}),(0,o.jsx)(ge.xv,{style:be.text,children:"  \u2022 In the event of absence of full payment within 7 days from the closing of the sale and receipt of the invoice by the buyer, ALPHA MARES is free to cancel the sale or to apply interests for late payment at the current rate."})]}),(0,o.jsx)(ge.xv,{style:be.pageNumber,render:e=>{let{pageNumber:t,totalPages:l}=e;return"".concat(t," / ").concat(l)}})]})})}const ve=e=>{switch(e){case"FrozenEmbryo":return"Frozen Embryo";case"ImplantedEmbryo":return"Implanted Embryo";case"Foal":return"Foal";case"Yearling":return"Yearling";case"YoungHorse":return"Young Horse";case"BroodmareFull":return"BroodmareFull";case"BroodmareEmpty":return"BroodmareEmpty";case"Stallion":return"Stallion";default:return""}},Ce=e=>{switch(e){case"FrozenEmbryo":return"Embryon congel\xe9";case"ImplantedEmbryo":return"Embryon implant\xe9";case"Foal":return"Poulain";case"Yearling":return"Yearling";case"YoungHorse":return"Jeune cheval";case"BroodmareFull":return"Poulini\xe8re pleine";case"BroodmareEmpty":return"Poulini\xe8re vide";case"Stallion":return"\xc9talon";default:return""}};var Ze=l(7123);function we(){const[e,t]=(0,s.useState)([]),[l]=(0,O.$G)(),[n,i]=(0,s.useState)(!1);let a;function r(){x.Z.get("".concat("http://localhost:5000/","api/auction/auctionsWithSales/")).then((e=>{JSON.stringify(a)!==JSON.stringify(e.data)&&(t(e.data),a=e.data)})).catch((e=>console.log(e)))}return(0,s.useEffect)((()=>{r();const e=setInterval((()=>r()),1e4);return()=>clearInterval(e)}),[]),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Facturation"})}),(0,o.jsx)("br",{}),!(0,H.xb)(e)&&(0,o.jsx)("div",{style:{textAlign:"center",width:"85%"},children:e.slice().reverse().map((e=>{return(0,o.jsxs)("div",{children:[(0,o.jsxs)(ie.Z,{expanded:n===e.auction._id,onChange:(t=e.auction._id,(e,l)=>{i(!!l&&t)}),children:[(0,o.jsxs)(re.Z,{expandIcon:(0,o.jsx)(ce.Z,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",sx:{display:"flex",gap:"10px"},children:[(0,o.jsx)(w.Z,{sx:{color:"black",flex:"3",fontWeight:"bold"},children:e.auction.title}),(0,o.jsx)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:E()(e.auction.start).format("LL")}),(0,o.jsxs)(w.Z,{sx:{color:"text.secondary",flex:"1"},children:[void 0!==e.auction.sales?e.auction.sales.length:""," ventes"]})]}),(0,o.jsx)(ae.Z,{children:e.sales.slice().map((t=>(0,o.jsx)(Ne,{sale:t,auction:e.auction,t:l,fetch:r},t.sale._id)))})]}),(0,o.jsx)("br",{})]},e.auction._id);var t}))})]})}const Ne=e=>{const{sale:t,auction:l,t:n,fetch:i}=e,[a,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1);return(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",whiteSpace:"nowrap",margin:"2%"},children:[(0,o.jsxs)("div",{style:{textAlign:"start",marginRight:"2vw",overflow:"clip"},children:[(0,o.jsxs)(w.Z,{sx:{color:"black"},children:[(0,o.jsxs)("strong",{children:["Lot ",t.sale.lot.number," :"]})," ",t.sale.lot.title," (",n("Lot."+t.sale.lot.type),")"]}),(0,o.jsxs)(w.Z,{sx:{color:"black"},children:[(0,o.jsx)("strong",{children:"Ench\xe9risseur :"})," ",t.user.name,"  ",t.user.surname," (",t.user.email," - ",t.user.phoneNumber,")"]})]}),t.sale.isBillSent?(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{href:"".concat("http://localhost:5000/").concat(t.sale.bill),target:"_blank",rel:"noreferrer",style:{color:"black",fontWeight:"bold",textDecoration:"underline",marginInline:"20px"},children:"Facture"}),(0,o.jsx)(S.Z,{variant:"contained",onClick:()=>h(!0),sx:{marginLeft:"5%"},disabled:a,children:"Ins\xe9rer"}),(0,o.jsx)(Se,{open:x,message:"remplacer la facture actuelle",insertType:!0,sale:t.sale,auction:l,setSending:r,blob:"",onClose:()=>h(!1),fetch:i})]}):(0,o.jsx)(ge.WD,{document:"English"===t.user.language?(0,o.jsx)(ye,{sale:t.sale,user:t.user,auction:l}):(0,o.jsx)(fe,{sale:t.sale,user:t.user,auction:l}),fileName:"Sale"+t.sale._id+".pdf",children:e=>{let{blob:s,url:n,loading:u,error:j}=e;return u?(0,o.jsx)("h1",{children:"G\xe9n\xe9ration..."}):(0,o.jsxs)("div",{style:{display:"flex",gap:"2%"},children:[(0,o.jsx)(S.Z,{variant:"contained",onClick:e=>{e.preventDefault(),window.open(n,"_blank")},children:"Facture automatique"}),(0,o.jsx)(S.Z,{variant:"contained",onClick:e=>{e.preventDefault(),d(!0)},sx:{backgroundColor:"orange"},disabled:a,children:"Envoyer"}),(0,o.jsx)(S.Z,{variant:"contained",onClick:e=>{e.preventDefault(),h(!0)},sx:{backgroundColor:"orange"},disabled:a,children:"Ins\xe9rer"}),(0,o.jsx)(Se,{open:c,message:"envoyer facture automatique",insertType:!1,sale:t.sale,auction:l,setSending:r,blob:s,onClose:()=>d(!1),fetch:i}),(0,o.jsx)(Se,{open:x,message:"envoyer une facture locale",insertType:!0,sale:t.sale,auction:l,setSending:r,blob:s,onClose:()=>h(!1),fetch:i})]})}})]},t.sale._id)},Se=e=>{const{open:t,insertType:l,message:n,sale:i,auction:a,setSending:r,blob:c,onClose:d,fetch:h}=e,[u,j]=(0,s.useState)(null);return(0,o.jsx)(Ae,{open:t,message:n,insertType:l,yesFunction:l?async function(){if(d(),u){const e=new FormData;e.append("saleId",i._id),e.append("userId",i.userId),e.append("auctionId",a._id),e.append("bill",u,i._id+".pdf"),r(!0),await x.Z.post("".concat("http://localhost:5000/","api/user/modifyBill/"),e).then((()=>h())).catch((e=>console.error(e))),r(!1)}}:async function(){d();const e=new FormData;e.append("saleId",i._id),e.append("userId",i.userId),e.append("auctionId",a._id),e.append("bill",c,i._id+".pdf"),r(!0),await x.Z.post("".concat("http://localhost:5000/","api/user/sendBill/"),e).then((()=>h())).catch((e=>console.error(e))),r(!1)},file:u,setFile:j,onClose:function(){d(),j(null)}})},Ae=e=>{const{open:t,message:l,insertType:s,yesFunction:n,file:i,setFile:a,onClose:r}=e;return(0,o.jsxs)(T.Z,{onClose:r,open:t,className:"confirm-dialog",children:[(0,o.jsx)("p",{className:"message",children:"\xcates-vous s\xfbr de vouloir"}),(0,o.jsxs)("p",{className:"message",children:[l," ?"]}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("input",{className:"input-bill",type:"file",name:"localBill",id:"localBill",accept:"application/pdf",onChange:e=>a(e.target.files[0])})]}),(0,o.jsxs)(Ze.Z,{sx:{display:"flex",justifyContent:"center"},children:[(0,o.jsx)("button",{onClick:n,disabled:!!s&&!i,children:"Oui"}),(0,o.jsx)("button",{onClick:r,children:"Non"})]})]})};function Ee(){return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyItems:"center"},children:[(0,o.jsx)("br",{}),(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)("h1",{children:"Onglet en devenir..."})}),(0,o.jsx)("br",{})]})}const Le=()=>{const[e,t]=s.useState(0);(0,s.useEffect)((()=>{const e=sessionStorage.getItem("activeTab");null!==e&&t(parseInt(e))}),[]);return(0,o.jsxs)("div",{className:"subNavBar",children:[(0,o.jsxs)(a.Z,{value:e,onChange:(e,l)=>{t(l),sessionStorage.setItem("activeTab",l.toString())},textColor:"inherit",indicatorColor:"primary",centered:!0,children:[(0,o.jsx)(r.Z,{label:"Ventes"}),(0,o.jsx)(r.Z,{label:"Utilisateurs"}),(0,o.jsx)(r.Z,{label:"M\xe9dia"}),(0,o.jsx)(r.Z,{label:"Ench\xe9rissement"}),(0,o.jsx)(r.Z,{label:"Ench\xe8re en cours"}),(0,o.jsx)(r.Z,{label:"Facturation"}),(0,o.jsx)(r.Z,{label:"Document l\xe9gaux"}),(0,o.jsx)(r.Z,{label:"Commissaire priseur"})]}),0===e&&(0,o.jsx)(d,{}),1===e&&(0,o.jsx)(K,{}),2===e&&(0,o.jsx)(se,{}),3===e&&(0,o.jsx)(oe,{}),4===e&&(0,o.jsx)(ue,{}),5===e&&(0,o.jsx)(we,{}),6===e&&(0,o.jsx)(xe,{}),7===e&&(0,o.jsx)(Ee,{})]})},Fe=()=>(0,i.v9)((e=>e.userReducer)).isAdmin?(0,o.jsxs)("div",{className:"admin",children:[(0,o.jsx)(Le,{}),(0,o.jsx)(n.Z5,{children:(0,o.jsx)(n.AW,{path:"/admin/ventes",element:(0,o.jsx)(d,{})})})]}):(0,o.jsx)("h3",{style:{textAlign:"center",margin:"auto"},children:"UNHAUTHORIZED"})},2480:()=>{}}]);
//# sourceMappingURL=70.5e339260.chunk.js.map